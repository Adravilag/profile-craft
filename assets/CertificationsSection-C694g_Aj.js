import{r,j as e,x as H,y as W,z as Q,A as q,B as J}from"./index-d6xZDx9R.js";import{H as X}from"./HeaderSection-DuxjH_qB.js";import{A as K}from"./AdminModal-xUnjHPos.js";import{F as ee}from"./FloatingActionButtonGroup-CHp1PSLB.js";const te="_datePickerContainer_v776w_3",ae="_inputContainer_v776w_8",ie="_dateInput_v776w_14",se="_calendarButton_v776w_32",ne="_calendarDropdown_v776w_56",re="_calendarHeader_v776w_84",oe="_navButton_v776w_92",ce="_monthYear_v776w_112",le="_calendarGrid_v776w_118",de="_weekDays_v776w_122",me="_weekDay_v776w_122",ue="_daysGrid_v776w_137",fe="_dayButton_v776w_143",ge="_validDay_v776w_159",_e="_emptyDay_v776w_164",pe="_selected_v776w_169",he="_today_v776w_175",ye="_calendarFooter_v776w_195",ve="_todayButton_v776w_203",je="_clearButton_v776w_204",m={datePickerContainer:te,inputContainer:ae,dateInput:ie,calendarButton:se,calendarDropdown:ne,calendarHeader:re,navButton:oe,monthYear:ce,calendarGrid:le,weekDays:de,weekDay:me,daysGrid:ue,dayButton:fe,validDay:ge,emptyDay:_e,selected:pe,today:he,calendarFooter:ye,todayButton:ve,clearButton:je},xe=({value:o,onChange:u,placeholder:i="Seleccionar fecha",required:L=!1,name:N,id:A})=>{const[b,_]=r.useState(!1),[f,p]=r.useState(null),[h,D]=r.useState(new Date),[B,x]=r.useState(o),C=r.useRef(null),E=r.useRef(null);r.useEffect(()=>{if(o){const d=(F=>{const T=F.match(/(\d{4})/);if(!T)return null;const Z=parseInt(T[1]),$=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],V=["january","february","march","april","may","june","july","august","september","october","november","december"],z=F.toLowerCase();let w=0;return $.forEach((t,n)=>{z.includes(t)&&(w=n)}),V.forEach((t,n)=>{z.includes(t)&&(w=n)}),new Date(Z,w,1)})(o);d&&(p(d),D(d)),x(o)}},[o]),r.useEffect(()=>{const a=d=>{C.current&&!C.current.contains(d.target)&&_(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const v=a=>`${["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][a.getMonth()]} ${a.getFullYear()}`,I=a=>{p(a);const d=v(a);x(d),u(d),_(!1)},S=a=>{x(a.target.value),u(a.target.value)},M=()=>{D(new Date(h.getFullYear(),h.getMonth()+1,1))},G=()=>{D(new Date(h.getFullYear(),h.getMonth()-1,1))},s=a=>{const d=a.getFullYear(),F=a.getMonth(),T=new Date(d,F,1),$=new Date(d,F+1,0).getDate(),V=T.getDay(),z=[];for(let w=0;w<V;w++)z.push(null);for(let w=1;w<=$;w++)z.push(new Date(d,F,w));return z},k=a=>!a||!f?!1:a.getMonth()===f.getMonth()&&a.getFullYear()===f.getFullYear(),U=a=>{if(!a)return!1;const d=new Date;return a.getDate()===d.getDate()&&a.getMonth()===d.getMonth()&&a.getFullYear()===d.getFullYear()};return e.jsxs("div",{className:m.datePickerContainer,ref:C,children:[e.jsxs("div",{className:m.inputContainer,children:[e.jsx("input",{ref:E,type:"text",value:B,onChange:S,onFocus:()=>_(!0),placeholder:i,required:L,name:N,id:A,className:m.dateInput}),e.jsx("button",{type:"button",className:m.calendarButton,onClick:()=>_(!b),children:e.jsx("i",{className:"fas fa-calendar-alt"})})]}),b&&e.jsxs("div",{className:m.calendarDropdown,children:[e.jsxs("div",{className:m.calendarHeader,children:[e.jsx("button",{type:"button",className:m.navButton,onClick:G,children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsx("span",{className:m.monthYear,children:v(h)}),e.jsx("button",{type:"button",className:m.navButton,onClick:M,children:e.jsx("i",{className:"fas fa-chevron-right"})})]}),e.jsxs("div",{className:m.calendarGrid,children:[e.jsx("div",{className:m.weekDays,children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(a=>e.jsx("div",{className:m.weekDay,children:a},a))}),e.jsx("div",{className:m.daysGrid,children:s(h).map((a,d)=>e.jsx("button",{type:"button",className:`${m.dayButton} ${a?m.validDay:m.emptyDay} ${a&&k(a)?m.selected:""} ${a&&U(a)?m.today:""}`,onClick:()=>a&&I(a),disabled:!a,children:a==null?void 0:a.getDate()},d))})]}),e.jsxs("div",{className:m.calendarFooter,children:[e.jsx("button",{type:"button",className:m.todayButton,onClick:()=>I(new Date),children:"Hoy"}),e.jsx("button",{type:"button",className:m.clearButton,onClick:()=>{p(null),x(""),u(""),_(!1)},children:"Limpiar"})]})]})]})},Ce=[{id:"aws",name:"Amazon Web Services (AWS)",logoUrl:"/assets/images/certification-logos/aws.svg",verifyBaseUrl:"https://www.credly.com/badges/",category:"cloud",description:"Certificaciones de servicios en la nube de Amazon"},{id:"microsoft",name:"Microsoft Azure",logoUrl:"/assets/images/certification-logos/microsoft.svg",verifyBaseUrl:"https://learn.microsoft.com/en-us/users/",category:"cloud",description:"Certificaciones de Microsoft Azure y tecnologías relacionadas"},{id:"google-cloud",name:"Google Cloud Platform",logoUrl:"/assets/images/certification-logos/google-cloud.svg",verifyBaseUrl:"https://www.credential.net/profile/",category:"cloud",description:"Certificaciones de Google Cloud Platform"},{id:"sololearn",name:"SoloLearn",logoUrl:"/assets/images/certification-logos/sololearn.png",verifyBaseUrl:"https://www.sololearn.com/certificates/",certificateImageUrl:"https://api2.sololearn.com/v2/certificates/{credentialId}/image/pdf",category:"programming",description:"Certificaciones de programación y desarrollo web"},{id:"codecademy",name:"Codecademy",logoUrl:"/assets/images/certification-logos/codecademy.svg",verifyBaseUrl:"https://www.codecademy.com/profiles/",category:"programming",description:"Certificaciones de programación y ciencias de datos"},{id:"freecodecamp",name:"freeCodeCamp",logoUrl:"/assets/images/certification-logos/freecodecamp.svg",verifyBaseUrl:"https://www.freecodecamp.org/certification/",category:"programming",description:"Certificaciones gratuitas de desarrollo web y programación"},{id:"udemy",name:"Udemy",logoUrl:"/assets/images/certification-logos/udemy.svg",verifyBaseUrl:"https://www.udemy.com/certificate/",category:"programming",description:"Certificaciones de cursos en línea"},{id:"coursera",name:"Coursera",logoUrl:"/assets/images/certification-logos/coursera.svg",verifyBaseUrl:"https://www.coursera.org/account/accomplishments/certificate/",category:"programming",description:"Certificaciones universitarias y profesionales"},{id:"oracle",name:"Oracle",logoUrl:"/assets/images/certifications/oracle-logo.png",verifyBaseUrl:"https://catalog-education.oracle.com/pls/certview/sharebadge?id=",category:"database",description:"Certificaciones de Oracle Database y tecnologías Java"},{id:"mongodb",name:"MongoDB",logoUrl:"/assets/images/certifications/mongodb-logo.png",verifyBaseUrl:"https://university.mongodb.com/certification/verify/",category:"database",description:"Certificaciones de MongoDB y NoSQL"},{id:"cisco",name:"Cisco",logoUrl:"/assets/images/certifications/cisco-logo.png",verifyBaseUrl:"https://www.cisco.com/c/en/us/training-events/training-certifications/certifications/verify.html",category:"security",description:"Certificaciones de redes y ciberseguridad"},{id:"comptia",name:"CompTIA",logoUrl:"/assets/images/certifications/comptia-logo.png",verifyBaseUrl:"https://www.certmetrics.com/comptia/public/verification.aspx",category:"security",description:"Certificaciones de TI y ciberseguridad"},{id:"adobe",name:"Adobe",logoUrl:"/assets/images/certifications/adobe-logo.png",verifyBaseUrl:"https://www.adobe.com/training/certification/verification.html",category:"design",description:"Certificaciones de diseño gráfico y multimedia"},{id:"figma",name:"Figma",logoUrl:"/assets/images/certifications/figma-logo.png",category:"design",description:"Certificaciones de diseño UX/UI"},{id:"pmi",name:"Project Management Institute (PMI)",logoUrl:"/assets/images/certifications/pmi-logo.png",verifyBaseUrl:"https://www.pmi.org/certifications/certification-registry",category:"project-management",description:"Certificaciones de gestión de proyectos"},{id:"scrum",name:"Scrum.org",logoUrl:"/assets/images/certifications/scrum-logo.png",verifyBaseUrl:"https://www.scrum.org/user/",category:"project-management",description:"Certificaciones de metodologías ágiles y Scrum"},{id:"linkedin",name:"LinkedIn Learning",logoUrl:"/assets/images/certification-logos/linkedin.svg",verifyBaseUrl:"https://www.linkedin.com/learning/certificates/",category:"other",description:"Certificaciones profesionales de LinkedIn"},{id:"edx",name:"edX",logoUrl:"/assets/images/certifications/edx-logo.png",verifyBaseUrl:"https://courses.edx.org/certificates/",category:"other",description:"Certificaciones universitarias en línea"},{id:"platzi",name:"Platzi",logoUrl:"/assets/images/certifications/platzi-logo.png",verifyBaseUrl:"https://platzi.com/p/",category:"programming",description:"Certificaciones de tecnología en español"}],O=(o,u)=>{if(!(!o.verifyBaseUrl||!u))return`${o.verifyBaseUrl}${u}`},Ie=(o,u)=>{if(!(!o.certificateImageUrl||!u))return o.certificateImageUrl.replace("{credentialId}",u)},Ne=(o,u)=>{if(!u||!u.trim())return!1;const i=u.trim();switch(o.id){case"aws":return/^[A-Za-z0-9-]{8,50}$/.test(i);case"microsoft":return/^[A-Za-z0-9-]{10,40}$/.test(i);case"google-cloud":return/^[A-Za-z0-9-]{10,40}$/.test(i);case"sololearn":return/^CT-[A-Z0-9]{6,20}$/.test(i);case"codecademy":return/^[A-Za-z0-9]{6,30}$/.test(i);case"freecodecamp":return/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/.test(i);case"udemy":return/^[A-Z0-9]{10,30}$/.test(i);case"coursera":return/^[A-Za-z0-9-]{10,40}$/.test(i);case"oracle":return/^[A-Z0-9]{8,25}$/.test(i);case"mongodb":return/^[A-Za-z0-9]{8,30}$/.test(i);case"cisco":return/^[A-Z0-9]{10,25}$/.test(i);case"comptia":return/^[A-Z0-9]{8,20}$/.test(i);case"linkedin":return/^[A-Za-z0-9]{8,40}$/.test(i);case"platzi":return/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/.test(i);default:return/^[A-Za-z0-9-_]{6,50}$/.test(i)}},R=o=>{switch(o.id){case"aws":return"Ej: ABC123DEF456";case"microsoft":return"Ej: MC-123456-789";case"google-cloud":return"Ej: GCP123456789";case"sololearn":return"Ej: CT-SBWD5KGG";case"codecademy":return"Ej: ABC123XYZ789";case"freecodecamp":return"Ej: usuario/responsive-web-design";case"udemy":return"Ej: UC-12345678";case"coursera":return"Ej: ABCD1234EFGH";case"oracle":return"Ej: 1Z0-123456";case"mongodb":return"Ej: MDB123456";case"cisco":return"Ej: CSCO12345678";case"comptia":return"Ej: COMP123456";case"linkedin":return"Ej: AaBbCcDdEeFf";case"platzi":return"Ej: usuario/certificado-react";default:return"Ej: ABC123XYZ789"}},P=[{id:"all",name:"Todas las categorías"},{id:"cloud",name:"Cloud Computing"},{id:"programming",name:"Programación"},{id:"database",name:"Bases de Datos"},{id:"security",name:"Ciberseguridad"},{id:"design",name:"Diseño"},{id:"project-management",name:"Gestión de Proyectos"},{id:"other",name:"Otros"}],be="_issuerSelectorContainer_7z00y_3",we="_inputContainer_7z00y_8",De="_issuerInput_7z00y_14",Be="_inputButtons_7z00y_32",Se="_clearButton_7z00y_41",ke="_dropdownButton_7z00y_42",Ue="_rotated_7z00y_68",Ae="_dropdownContainer_7z00y_72",Ee="_categoryFilters_7z00y_102",Fe="_filterLabel_7z00y_108",ze="_categoryButtons_7z00y_115",Le="_categoryButton_7z00y_115",Me="_active_7z00y_139",$e="_issuersList_7z00y_145",Ge="_noResults_7z00y_151",Te="_issuerOption_7z00y_177",Ve="_hovered_7z00y_192",Ze="_issuerLogo_7z00y_200",Re="_logoFallback_7z00y_218",Pe="_issuerInfo_7z00y_229",Oe="_issuerName_7z00y_234",Ye="_issuerDescription_7z00y_244",He="_issuerCategory_7z00y_254",We="_selectIcon_7z00y_263",Qe="_dropdownFooter_7z00y_284",c={issuerSelectorContainer:be,inputContainer:we,issuerInput:De,inputButtons:Be,clearButton:Se,dropdownButton:ke,rotated:Ue,dropdownContainer:Ae,categoryFilters:Ee,filterLabel:Fe,categoryButtons:ze,categoryButton:Le,active:Me,issuersList:$e,noResults:Ge,issuerOption:Te,hovered:Ve,issuerLogo:Ze,logoFallback:Re,issuerInfo:Pe,issuerName:Oe,issuerDescription:Ye,issuerCategory:He,selectIcon:We,dropdownFooter:Qe},qe=({value:o,onChange:u,placeholder:i="Seleccionar emisor",required:L=!1,name:N,id:A})=>{const[b,_]=r.useState(!1),[f,p]=r.useState(o),[h,D]=r.useState("all"),[B,x]=r.useState(null),C=r.useRef(null),E=r.useRef(null),v=Ce.filter(s=>{const k=s.name.toLowerCase().includes(f.toLowerCase())||s.id.toLowerCase().includes(f.toLowerCase()),U=h==="all"||s.category===h;return k&&U});r.useEffect(()=>{const s=k=>{C.current&&!C.current.contains(k.target)&&_(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const I=s=>{p(s.name),u(s),_(!1)},S=s=>{p(s.target.value),b||_(!0)},M=()=>{_(!0)},G=()=>{p(""),u({})};return e.jsxs("div",{className:c.issuerSelectorContainer,ref:C,children:[e.jsxs("div",{className:c.inputContainer,children:[e.jsx("input",{ref:E,type:"text",value:f,onChange:S,onFocus:M,placeholder:i,required:L,name:N,id:A,className:c.issuerInput,autoComplete:"off"}),e.jsxs("div",{className:c.inputButtons,children:[f&&e.jsx("button",{type:"button",className:c.clearButton,onClick:G,title:"Limpiar selección",children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("button",{type:"button",className:c.dropdownButton,onClick:()=>_(!b),title:"Abrir selector",children:e.jsx("i",{className:`fas fa-chevron-down ${b?c.rotated:""}`})})]})]}),b&&e.jsxs("div",{className:c.dropdownContainer,children:[e.jsxs("div",{className:c.categoryFilters,children:[e.jsx("div",{className:c.filterLabel,children:"Categorías:"}),e.jsx("div",{className:c.categoryButtons,children:P.map(s=>e.jsx("button",{type:"button",className:`${c.categoryButton} ${h===s.id?c.active:""}`,onClick:()=>D(s.id),children:s.name},s.id))})]}),e.jsx("div",{className:c.issuersList,children:v.length===0?e.jsxs("div",{className:c.noResults,children:[e.jsx("i",{className:"fas fa-search"}),e.jsx("p",{children:"No se encontraron emisores"}),e.jsx("small",{children:"Prueba con otro término de búsqueda o categoría"})]}):v.map(s=>{var k;return e.jsxs("button",{type:"button",className:`${c.issuerOption} ${B===s.id?c.hovered:""}`,onClick:()=>I(s),onMouseEnter:()=>x(s.id),onMouseLeave:()=>x(null),children:[e.jsxs("div",{className:c.issuerLogo,children:[e.jsx("img",{src:s.logoUrl,alt:`${s.name} logo`,onError:U=>{U.target.style.display="none";const a=U.target.nextElementSibling;a&&(a.style.display="flex")}}),e.jsx("div",{className:c.logoFallback,children:e.jsx("i",{className:"fas fa-certificate"})})]}),e.jsxs("div",{className:c.issuerInfo,children:[e.jsx("div",{className:c.issuerName,children:s.name}),s.description&&e.jsx("div",{className:c.issuerDescription,children:s.description}),e.jsxs("div",{className:c.issuerCategory,children:[e.jsx("i",{className:"fas fa-tag"}),(k=P.find(U=>U.id===s.category))==null?void 0:k.name]})]}),e.jsx("div",{className:c.selectIcon,children:e.jsx("i",{className:"fas fa-plus"})})]},s.id)})}),e.jsx("div",{className:c.dropdownFooter,children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle"}),"Se cargarán automáticamente el logo y URL de verificación"]})})]})]})},Je="_credentialInputContainer_ms5xh_3",Xe="_inputWrapper_ms5xh_7",Ke="_credentialInput_ms5xh_3",et="_checking_ms5xh_37",tt="_valid_ms5xh_42",at="_invalid_ms5xh_48",it="_statusContainer_ms5xh_55",st="_statusIcon_ms5xh_63",nt="_validIcon_ms5xh_68",rt="_invalidIcon_ms5xh_73",ot="_helpText_ms5xh_102",ct="_verifyContainer_ms5xh_111",lt="_verifyLink_ms5xh_116",dt="_errorContainer_ms5xh_142",j={credentialInputContainer:Je,inputWrapper:Xe,credentialInput:Ke,checking:et,valid:tt,invalid:at,statusContainer:it,statusIcon:st,validIcon:nt,invalidIcon:rt,helpText:ot,verifyContainer:ct,verifyLink:lt,errorContainer:dt},mt=({value:o,onChange:u,issuer:i,placeholder:L="ID de Credencial"})=>{const[N,A]=r.useState(null),[b,_]=r.useState(!1),[f,p]=r.useState();r.useEffect(()=>{if(!o.trim()||!i){A(null),p(void 0);return}_(!0);const x=setTimeout(()=>{const C=Ne(i,o);if(A(C),C){const E=O(i,o);p(E)}else p(void 0);_(!1)},800);return()=>clearTimeout(x)},[o,i]);const h=x=>{u(x.target.value)},D=()=>b?j.checking:N===!0?j.valid:N===!1?j.invalid:"",B=()=>b?e.jsx("i",{className:`fas fa-spinner fa-spin ${j.statusIcon}`}):N===!0?e.jsx("i",{className:`fas fa-check-circle ${j.statusIcon} ${j.validIcon}`}):N===!1?e.jsx("i",{className:`fas fa-times-circle ${j.statusIcon} ${j.invalidIcon}`}):null;return e.jsxs("div",{className:j.credentialInputContainer,children:[e.jsxs("div",{className:`${j.inputWrapper} ${D()}`,children:[e.jsx("input",{type:"text",value:o,onChange:h,placeholder:i?R(i):L,className:j.credentialInput}),e.jsx("div",{className:j.statusContainer,children:B()})]}),i&&e.jsx("div",{className:j.helpText,children:R(i)}),N===!0&&f&&e.jsx("div",{className:j.verifyContainer,children:e.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:j.verifyLink,children:[e.jsx("i",{className:"fas fa-external-link-alt"}),e.jsx("span",{children:"Verificar certificación"})]})}),N===!1&&o.trim()&&e.jsxs("div",{className:j.errorContainer,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),e.jsxs("span",{children:["Formato de credencial no válido para ",i==null?void 0:i.name]})]})]})},ut="_certificationsGrid_bojfs_61",ft="_certificationCard_bojfs_69",gt="_certImage_bojfs_141",_t="_certContent_bojfs_198",pt="_certTitle_bojfs_206",ht="_certIssuer_bojfs_220",yt="_certDetails_bojfs_235",vt="_certDate_bojfs_243",jt="_certId_bojfs_244",xt="_certActions_bojfs_278",Ct="_certVerifyBtn_bojfs_292",It="_certBadge_bojfs_372",Nt="_loadingState_bojfs_420",bt="_loadingSpinner_bojfs_428",wt="_emptyState_bojfs_448",Dt="_emptyIcon_bojfs_462",Bt="_emptyTitle_bojfs_479",St="_emptyDescription_bojfs_487",g={certificationsGrid:ut,certificationCard:ft,certImage:gt,certContent:_t,certTitle:pt,certIssuer:ht,certDetails:yt,certDate:vt,certId:jt,certActions:xt,certVerifyBtn:Ct,certBadge:It,loadingState:Nt,loadingSpinner:bt,emptyState:wt,emptyIcon:Dt,emptyTitle:Bt,emptyDescription:St},kt="_adminEmpty_vgc10_4",Ut="_adminItemsList_vgc10_21",At="_adminItemCard_vgc10_28",Et="_adminItemHeader_vgc10_43",Ft="_adminItemImage_vgc10_48",zt="_adminPlaceholderImage_vgc10_60",Lt="_adminItemInfo_vgc10_76",Mt="_adminItemSubtitle_vgc10_87",$t="_adminCertMetadata_vgc10_93",Gt="_adminItemDate_vgc10_102",Tt="_adminItemCredential_vgc10_103",Vt="_adminItemVerify_vgc10_104",Zt="_adminVerifyLink_vgc10_110",Rt="_adminItemActions_vgc10_131",Pt="_adminBtnSecondary_vgc10_137",Ot="_adminBtnDanger_vgc10_138",Yt="_adminForm_vgc10_171",Ht="_adminFormRow_vgc10_178",Wt="_adminFormGroup_vgc10_184",Qt="_adminLoading_vgc10_208",qt="_adminModalContent_vgc10_214",l={adminEmpty:kt,adminItemsList:Ut,adminItemCard:At,adminItemHeader:Et,adminItemImage:Ft,adminPlaceholderImage:zt,adminItemInfo:Lt,adminItemSubtitle:Mt,adminCertMetadata:$t,adminItemDate:Gt,adminItemCredential:Tt,adminItemVerify:Vt,adminVerifyLink:Zt,adminItemActions:Rt,adminBtnSecondary:Pt,adminBtnDanger:Ot,adminForm:Yt,adminFormRow:Ht,adminFormGroup:Wt,adminLoading:Qt,adminModalContent:qt},ta=({isAdminMode:o=!1,showAdminFAB:u=!1})=>{const[i,L]=r.useState([]),[N,A]=r.useState(!0),[b,_]=r.useState(!1),[f,p]=r.useState(!1),[h,D]=r.useState(null),[B,x]=r.useState(!1),{showSuccess:C,showError:E}=H(),[v,I]=r.useState({title:"",issuer:"",date:"",credential_id:"",image_url:"",verify_url:"",order_index:0}),[S,M]=r.useState(null),G={title:"",issuer:"",date:"",credential_id:"",image_url:"",verify_url:"",order_index:0},s=async()=>{try{A(!0),console.log("Iniciando carga de certificaciones...");const t=await W();console.log("Datos recibidos de la API:",t);const n=t.map(y=>({id:y.id,title:y.title,issuer:y.issuer,date:y.date,credentialId:y.credential_id,image:y.image_url||"/assets/images/foto-perfil.jpg",verifyUrl:y.verify_url}));console.log("Datos mapeados:",n),L(n)}catch(t){console.error("Error cargando certificaciones:",t)}finally{A(!1)}};r.useEffect(()=>{s()},[]);const k=()=>{_(!1),s()},U=t=>{const{name:n,value:y}=t.target;I(Y=>({...Y,[n]:n==="order_index"?parseInt(y)||0:y}))},a=t=>{I(n=>({...n,date:t}))},d=t=>{t.name&&(M(t),I(n=>({...n,issuer:t.name,image_url:t.logoUrl||""})))},F=async t=>{t.preventDefault(),x(!0);try{const n={title:v.title,issuer:v.issuer,date:v.date,credential_id:v.credential_id,image_url:v.image_url,verify_url:v.verify_url||"",order_index:v.order_index,user_id:1};h?(await Q(h,n),C("Éxito","Certificación actualizada correctamente")):(await q(n),C("Éxito","Certificación creada correctamente")),await s(),p(!1),D(null),I(G),M(null)}catch(n){console.error("Error guardando certificación:",n),E("Error","No se pudo guardar la certificación")}finally{x(!1)}},T=t=>{I({title:t.title,issuer:t.issuer,date:t.date,credential_id:t.credential_id,image_url:t.image_url,verify_url:t.verify_url||"",order_index:t.order_index}),D(t.id),p(!0)},Z=async(t,n)=>{if(confirm(`¿Estás seguro de que quieres eliminar la certificación "${n}"?`))try{await J(t.toString()),C("Éxito","Certificación eliminada correctamente"),await s()}catch(y){console.error("Error eliminando certificación:",y),E("Error","No se pudo eliminar la certificación")}},$=()=>{I({...G,order_index:i.length}),D(null),M(null),p(!0)},V=()=>i.length===0?e.jsxs("div",{className:l.adminEmpty,children:[e.jsx("i",{className:"fas fa-certificate"}),e.jsx("h3",{children:"No hay certificaciones"}),e.jsx("p",{children:"Añade la primera certificación usando el botón flotante."})]}):e.jsx("div",{className:l.adminItemsList,children:i.map(t=>e.jsx("div",{className:l.adminItemCard,children:e.jsxs("div",{className:l.adminItemHeader,children:[e.jsx("div",{className:l.adminItemImage,children:t.image?e.jsx("img",{src:t.image,alt:t.title,onError:n=>{n.target.src="/assets/images/foto-perfil.jpg"}}):e.jsx("div",{className:l.adminPlaceholderImage,children:e.jsx("i",{className:"fas fa-certificate"})})}),e.jsxs("div",{className:l.adminItemInfo,children:[e.jsx("h3",{children:t.title}),e.jsx("p",{className:l.adminItemSubtitle,children:t.issuer}),e.jsxs("div",{className:l.adminCertMetadata,children:[e.jsxs("div",{className:l.adminItemDate,children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:t.date})]}),t.credentialId&&e.jsxs("div",{className:l.adminItemCredential,children:[e.jsx("i",{className:"fas fa-id-card"}),e.jsxs("span",{children:["ID: ",t.credentialId]})]}),t.verifyUrl&&e.jsx("div",{className:l.adminItemVerify,children:e.jsxs("a",{href:t.verifyUrl,target:"_blank",rel:"noopener noreferrer",className:l.adminVerifyLink,title:"Verificar certificación",children:[e.jsx("i",{className:"fas fa-external-link-alt"}),e.jsx("span",{children:"Verificar"})]})})]})]}),e.jsxs("div",{className:l.adminItemActions,children:[e.jsxs("button",{className:l.adminBtnSecondary,onClick:()=>{T({id:t.id,title:t.title,issuer:t.issuer,date:t.date,credential_id:t.credentialId||"",image_url:t.image||"",verify_url:t.verifyUrl||"",order_index:t.id})},children:[e.jsx("i",{className:"fas fa-edit"}),"Editar"]}),e.jsxs("button",{className:l.adminBtnDanger,onClick:()=>{Z(t.id,t.title)},children:[e.jsx("i",{className:"fas fa-trash"}),"Eliminar"]})]})]})},`cert-admin-${t.id}`))}),z=()=>e.jsx("div",{children:e.jsxs("form",{onSubmit:F,className:`${l.adminForm} admin-form`,children:[e.jsxs("div",{className:l.adminFormRow,children:[e.jsxs("div",{className:l.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-title",children:"Título *"}),e.jsx("input",{type:"text",id:"cert-title",name:"title",value:v.title,onChange:U,required:!0,placeholder:"Ej: AWS Solutions Architect"})]}),e.jsxs("div",{className:l.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-issuer",children:"Emisor *"}),e.jsx(qe,{id:"cert-issuer",name:"issuer",value:v.issuer,onChange:d,required:!0,placeholder:"Buscar o seleccionar emisor..."})]})]}),e.jsxs("div",{className:l.adminFormRow,children:[e.jsxs("div",{className:l.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-date",children:"Fecha *"}),e.jsx(xe,{id:"cert-date",name:"date",value:v.date,onChange:a,required:!0,placeholder:"Seleccionar fecha de emisión"})]}),e.jsxs("div",{className:l.adminFormGroup,children:[e.jsx("label",{htmlFor:"cert-credential",children:"ID de Credencial"}),"              ",e.jsx(mt,{value:v.credential_id,issuer:S||null,onChange:t=>{if(I(n=>({...n,credential_id:t})),S&&t.trim()){if(S.verifyBaseUrl){const n=O(S,t);n&&I(y=>({...y,verify_url:n}))}if(S.certificateImageUrl){const n=Ie(S,t);n&&I(y=>({...y,image_url:n}))}}},placeholder:"ID opcional de la credencial"})]})]})]})}),w=()=>N?e.jsxs("div",{className:l.adminLoading,children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("p",{children:"Cargando certificaciones..."})]}):f?z():V();return e.jsxs("section",{className:"section-cv",id:"certifications",children:[e.jsx(X,{icon:"fas fa-certificate",title:"Certificaciones",subtitle:"Credenciales y certificaciones profesionales obtenidas",className:"certifications"}),e.jsxs("div",{className:"section-container",children:[N?e.jsx("div",{className:g.loadingState,children:e.jsxs("div",{className:g.loadingSpinner,children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("p",{children:"Cargando certificaciones..."})]})}):e.jsxs("div",{className:g.sectionContainer,children:[e.jsx("div",{className:g.certificationsGrid,children:i.map((t,n)=>e.jsxs("div",{className:g.certificationCard,style:{animationDelay:`${n*.1}s`},children:[e.jsx("div",{className:g.certImage,children:e.jsx("img",{src:t.image,alt:t.title,onError:y=>{y.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zMiAyMEwyNiAyNkgzOEwzMiAyMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTQ0IDM4SDIwVjQySDQ0VjM4WiIgZmlsbD0iIzlDQTRBRiIvPgo8L3N2Zz4K"}})}),e.jsxs("div",{className:g.certContent,children:[e.jsx("h3",{className:g.certTitle,children:t.title}),e.jsx("p",{className:g.certIssuer,children:t.issuer}),e.jsxs("div",{className:g.certDetails,children:[e.jsxs("div",{className:g.certDate,children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:t.date})]}),t.credentialId&&e.jsxs("div",{className:g.certId,children:[e.jsx("i",{className:"fas fa-id-badge"}),e.jsxs("span",{children:["ID: ",t.credentialId]})]})]}),e.jsx("div",{className:g.certActions,children:t.verifyUrl?e.jsxs("a",{href:t.verifyUrl,target:"_blank",rel:"noopener noreferrer",className:g.certVerifyBtn,title:"Verificar certificación",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Verificar"})]}):e.jsxs("button",{className:g.certVerifyBtn,title:"Verificar certificación",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Verificar"})]})})]}),e.jsx("div",{className:g.certBadge,children:e.jsx("i",{className:"fas fa-award"})})]},`cert-${t.id}`))}),i.length===0&&e.jsxs("div",{className:g.emptyState,children:[e.jsx("div",{className:g.emptyIcon,children:e.jsx("i",{className:"fas fa-certificate"})}),e.jsx("h3",{className:g.emptyTitle,children:"No hay certificaciones disponibles"}),e.jsx("p",{className:g.emptyDescription,children:"Las certificaciones aparecerán aquí cuando estén disponibles."})]})]}),!o&&u&&e.jsx(ee,{actions:[{id:"admin-certifications",onClick:()=>{_(!0)},icon:"fas fa-shield-alt",label:"Administrar Certificaciones",color:"primary"},{id:"add-certification",onClick:()=>{p(!0),_(!0),$()},icon:"fas fa-plus",label:"Añadir Certificación",color:"success"}],position:"bottom-right"})]}),b&&e.jsx(K,{isOpen:b,onClose:k,title:"Administrar Certificaciones",icon:"fas fa-certificate",tabs:[{id:"list",label:"Listado",icon:"fas fa-list",content:null,badge:i.length.toString()},{id:"form",label:f&&h?"Editar":"Nueva",icon:f&&h?"fas fa-edit":"fas fa-plus",content:null,disabled:!f}],activeTab:f?"form":"list",onTabChange:t=>{t==="list"&&f?p(!1):t==="form"&&!f&&$()},showTabs:!0,floatingActions:f?[{id:"cancel-cert",label:"Cancelar",icon:"fas fa-times",variant:"secondary",onClick:()=>p(!1)},{id:"save-cert",label:B?"Guardando...":h?"Guardar Cambios":"Crear Certificación",icon:B?"fas fa-spinner fa-spin":"fas fa-save",variant:"primary",onClick:()=>{const t=document.querySelector(".admin-form");t&&t.requestSubmit()},disabled:B,loading:B}]:[{id:"new-cert",label:"Nueva Certificación",icon:"fas fa-plus",variant:"primary",onClick:$}],children:e.jsx("div",{className:l.adminModalContent,children:w()})})]})};export{ta as default};
