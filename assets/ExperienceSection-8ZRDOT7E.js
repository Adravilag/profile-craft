import{r as p,j as e,c as le,g as re,d as oe,F as ue,e as pe,f as xe,h as fe,i as ge,k as be,l as je}from"./index-d6xZDx9R.js";import{H as _e}from"./HeaderSection-DuxjH_qB.js";import{A as Ne}from"./AdminModal-xUnjHPos.js";const ve=()=>{const t=p.useRef(null);return p.useEffect(()=>{const x=new IntersectionObserver(m=>{m.forEach(l=>{l.isIntersecting&&(l.target.classList.add("visible"),x.unobserve(l.target))})},{threshold:.1,rootMargin:"50px 0px -50px 0px"});return t.current&&t.current.querySelectorAll(".timeline-item, .chronological-item").forEach(l=>x.observe(l)),()=>{t.current&&t.current.querySelectorAll(".timeline-item, .chronological-item").forEach(l=>x.unobserve(l))}},[]),t},Q=(t,x)=>{const m=te(t);if(!x||x.trim()==="")return`${m} - Presente`;const l=te(x);return!l||l.toLowerCase()==="presente"?`${m} - Presente`:`${m} - ${l}`},ne=(t,x)=>{const m=d=>{if(!d)return 0;const M=d.toLowerCase();if(M==="presente"||M==="current"){const v=new Date;return v.getFullYear()*12+v.getMonth()}if(/^\d{4}$/.test(d))return parseInt(d)*12;if(/^\d{4}-\d{2}$/.test(d)){const[v,y]=d.split("-"),S=parseInt(v),P=parseInt(y)-1;return S*12+P}if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(d)){const v=new Date(d);if(!isNaN(v.getTime())){const y=v.getFullYear(),S=v.getMonth();return y*12+S}}const N=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],G=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],w=d.match(/^(\w+)\s+del\s+(\d{4})$/i);if(w){const v=w[1].toLowerCase(),y=parseInt(w[2]),S=N.indexOf(v);if(S!==-1&&!isNaN(y))return y*12+S}const L=d.match(/^\d+\s+de\s+(\w+)\s+del\s+(\d{4})$/i);if(L){const v=L[1].toLowerCase(),y=parseInt(L[2]),S=N.indexOf(v);if(S!==-1&&!isNaN(y))return y*12+S}const[k,V]=d.split(" ");let C=G.indexOf(k);C===-1&&(C=N.indexOf(k.toLowerCase()));const O=parseInt(V);if(C!==-1&&!isNaN(O))return O*12+C;const J=parseInt(d);return isNaN(J)?0:J*12},l=m(t),c=m(x)-l;if(c<0)return"Duración inválida";if(c===0)return"Menos de 1 mes";if(c<12)return c===1?"1 mes":`${c} meses`;const f=Math.floor(c/12),g=c%12;if(g===0)return f===1?"1 año":`${f} años`;const r=f===1?"1 año":`${f} años`,b=g===1?"1 mes":`${g} meses`;return`${r} y ${b}`},te=t=>{if(!t||t.trim()==="")return"";const x=t.toLowerCase();if(x==="presente"||x==="current")return"Presente";const m=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];if(t.includes("T")){const c=new Date(t);if(!isNaN(c.getTime())){const f=c.getMonth(),g=c.getFullYear();if(f>=0&&f<12)return`${m[f]} del ${g}`}}if(/^\d{4}-\d{2}$/.test(t)){const[c,f]=t.split("-"),g=parseInt(c),r=parseInt(f)-1;if(r>=0&&r<12)return`${m[r]} del ${g}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[c,f]=t.split("-"),g=parseInt(c),r=parseInt(f)-1;if(r>=0&&r<12)return`${m[r]} del ${g}`}const l=new Date(t);if(!isNaN(l.getTime())){const c=l.getMonth(),f=l.getFullYear();if(c>=0&&c<12)return`${m[c]} del ${f}`}const _=t.match(/^(Enero|Febrero|Marzo|Abril|Mayo|Junio|Julio|Agosto|Septiembre|Octubre|Noviembre|Diciembre)\s+(\d{4})$/i);if(_){const c=_[1],f=parseInt(_[2]);return`${c} del ${f}`}return t},ce=t=>{if(!t)return"";const x=t.toLowerCase();if(x==="presente"||x==="current"||x==="actualmente")return"presente";const m=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],l=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],_=t.match(/^(\w+)\s+del\s+(\d{4})$/i);if(_){const g=_[1],r=parseInt(_[2]);let b=l.indexOf(g);if(b===-1&&(b=m.indexOf(g.toLowerCase())),b!==-1)return`${r}-${String(b+1).padStart(2,"0")}`}const c=t.match(/^(\d+)\s+de\s+(\w+)\s+del\s+(\d{4})$/i);if(c){const g=parseInt(c[1]),r=c[2].toLowerCase(),b=parseInt(c[3]),d=m.indexOf(r);if(d!==-1&&g>=1&&g<=31)return g===1?`${b}-${String(d+1).padStart(2,"0")}`:`${b}-${String(d+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`}const f=t.match(/^(\w+)\s+(\d{4})$/i);if(f){const g=f[1],r=parseInt(f[2]);let b=l.indexOf(g);if(b===-1&&(b=m.indexOf(g.toLowerCase())),b!==-1)return`${r}-${String(b+1).padStart(2,"0")}`}if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(t)){const g=new Date(t);if(!isNaN(g.getTime())){const r=g.getFullYear(),b=String(g.getMonth()+1).padStart(2,"0"),d=String(g.getDate()).padStart(2,"0");return g.getDate()===1?`${r}-${b}`:`${r}-${b}-${d}`}}return/^\d{4}-\d{2}(-\d{2})?$/.test(t),t},ye=({experience:t,index:x,animationDelay:m=.1,showDuration:l=!0})=>e.jsxs("div",{className:"timeline-item",style:{animationDelay:`${x*m}s`},children:[e.jsx("div",{className:"timeline-marker",children:e.jsx("div",{className:"marker-dot"})}),e.jsxs("div",{className:"timeline-content",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("h4",{className:"timeline-title",children:t.position}),e.jsxs("div",{className:"timeline-period",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:Q(t.start_date,t.end_date)})]})]}),e.jsxs("p",{className:"timeline-company",children:[e.jsx("i",{className:"fas fa-building"}),t.company]}),l&&e.jsxs("div",{className:"timeline-duration",children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:ne(t.start_date,t.end_date)})]}),e.jsx("p",{className:"timeline-description",children:t.description}),t.technologies&&t.technologies.length>0&&e.jsxs("div",{className:"timeline-skills",children:[e.jsxs("div",{className:"skills-label",children:[e.jsx("i",{className:"fas fa-tools"}),e.jsx("span",{children:"Tecnologías:"})]}),e.jsx("div",{className:"skills-tags",children:t.technologies.map((_,c)=>e.jsx("span",{className:"timeline-skill",children:_},c))})]}),t.end_date&&t.end_date.toLowerCase()==="presente"&&e.jsxs("div",{className:"current-position-badge",children:[e.jsx("i",{className:"fas fa-star"}),e.jsx("span",{children:"Posición Actual"})]})]})]}),Ee=({education:t,index:x,animationDelay:m=.1,showDuration:l=!0})=>e.jsxs("div",{className:"timeline-item education-item",style:{animationDelay:`${x*m}s`},children:[e.jsx("div",{className:"timeline-marker education-marker",children:e.jsx("div",{className:"marker-dot"})}),e.jsxs("div",{className:"timeline-content",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("h4",{className:"timeline-title",children:t.title}),e.jsxs("div",{className:"timeline-period",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:Q(t.start_date,t.end_date)})]})]}),e.jsxs("p",{className:"timeline-company",children:[e.jsx("i",{className:"fas fa-university"}),t.institution]}),l&&e.jsxs("div",{className:"timeline-duration",children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:ne(t.start_date,t.end_date)})]}),t.description&&e.jsx("p",{className:"timeline-description",children:t.description}),t.grade&&e.jsxs("div",{className:"education-grade",children:[e.jsx("i",{className:"fas fa-medal"}),e.jsxs("span",{children:["Calificación: ",t.grade]})]})]})]}),Ce=({item:t,index:x,position:m,animationDelay:l=.15})=>e.jsxs("div",{className:`chronological-item ${t.type} ${m}`,style:{animationDelay:`${x*l}s`},children:[e.jsxs("div",{className:"chronological-marker",children:[e.jsx("div",{className:`marker-dot ${t.type}`,children:e.jsx("i",{className:t.type==="experience"?"fas fa-briefcase":"fas fa-graduation-cap"})}),e.jsx("div",{className:"chronological-year-external",children:te(t.end_date)||"Presente"})]}),e.jsxs("div",{className:"chronological-content",children:[e.jsx("div",{className:"chronological-header",children:e.jsx("div",{className:`chronological-type ${t.type}`,children:t.type==="experience"?"Experiencia":"Formación"})}),e.jsx("h4",{className:"chronological-title",children:t.title}),e.jsxs("p",{className:"chronological-company",children:[e.jsx("i",{className:t.type==="experience"?"fas fa-building":"fas fa-university"}),t.type==="experience"?t.company:t.institution]}),e.jsxs("div",{className:"chronological-period",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:Q(t.start_date,t.end_date)})]}),e.jsxs("div",{className:"chronological-duration",children:[e.jsx("i",{className:"fas fa-hourglass-half"}),e.jsx("span",{children:ne(t.start_date,t.end_date)})]}),e.jsx("p",{className:"chronological-description",children:t.description}),t.type==="experience"&&t.technologies&&t.technologies.length>0&&e.jsxs("div",{className:"chronological-skills",children:[e.jsxs("div",{className:"skills-label",children:[e.jsx("i",{className:"fas fa-tools"}),e.jsx("span",{children:"Tecnologías:"})]}),e.jsx("div",{className:"skills-tags",children:t.technologies.map((_,c)=>e.jsx("span",{className:"timeline-skill",children:_},c))})]}),t.type==="education"&&t.grade&&e.jsxs("div",{className:"education-grade",children:[e.jsx("i",{className:"fas fa-medal"}),e.jsxs("span",{children:["Calificación: ",t.grade]})]})]})]}),$e="_modalOverlay_11gbb_70",Se="_modalContainer_11gbb_91",we="_modalHeader_11gbb_118",Te="_headerTop_11gbb_127",Ie="_backButton_11gbb_134",Ae="_modalTitle_11gbb_159",ke="_progressIndicator_11gbb_176",Fe="_progressBar_11gbb_183",Me="_progressFill_11gbb_192",Le="_progressText_11gbb_216",De="_modalContent_11gbb_226",Oe="_form_11gbb_232",Pe="_formSection_11gbb_240",Be="_sectionTitle_11gbb_265",ze="_formGrid_11gbb_281",Re="_formField_11gbb_289",Ge="_label_11gbb_295",Ve="_input_11gbb_312",Je="_inputValid_11gbb_339",He="_inputError_11gbb_344",Ye="_inputDisabled_11gbb_349",qe="_textarea_11gbb_356",Ue="_textareaError_11gbb_378",Ke="_textareaContainer_11gbb_383",We="_characterCounter_11gbb_387",Ze="_warning_11gbb_400",Qe="_error_11gbb_406",Xe="_helperText_11gbb_413",es="_errorText_11gbb_419",ss="_dateRangeContainer_11gbb_446",as="_currentToggle_11gbb_453",ts="_checkbox_11gbb_463",ns="_checkboxLabel_11gbb_470",is="_technologyContainer_11gbb_480",rs="_technologyInput_11gbb_484",os="_suggestions_11gbb_502",cs="_suggestionItem_11gbb_517",ls="_technologyChips_11gbb_537",ds="_chip_11gbb_544",ms="_chipRemove_11gbb_579",hs="_stickyFooter_11gbb_602",us="_footerContent_11gbb_618",ps="_saveIndicator_11gbb_625",xs="_actions_11gbb_634",fs="_button_11gbb_640",gs="_buttonPrimary_11gbb_661",bs="_buttonSecondary_11gbb_673",js="_spinning_11gbb_710",_s="_shortcuts_11gbb_720",a={modalOverlay:$e,modalContainer:Se,modalHeader:we,headerTop:Te,backButton:Ie,modalTitle:Ae,progressIndicator:ke,progressBar:Fe,progressFill:Me,progressText:Le,modalContent:De,form:Oe,formSection:Pe,sectionTitle:Be,formGrid:ze,formField:Re,label:Ge,input:Ve,inputValid:Je,inputError:He,inputDisabled:Ye,textarea:qe,textareaError:Ue,textareaContainer:Ke,characterCounter:We,warning:Ze,error:Qe,helperText:Xe,errorText:es,dateRangeContainer:ss,currentToggle:as,checkbox:ts,checkboxLabel:ns,technologyContainer:is,technologyInput:rs,suggestions:os,suggestionItem:cs,technologyChips:ls,chip:ds,chipRemove:ms,stickyFooter:hs,footerContent:us,saveIndicator:ps,actions:xs,button:fs,buttonPrimary:gs,buttonSecondary:bs,spinning:js,shortcuts:_s},Ns=["React","Vue.js","Angular","JavaScript","TypeScript","Node.js","Express.js","Python","Django","Flask","Java","Spring Boot","C#",".NET","PHP","Laravel","HTML5","CSS3","SASS","SCSS","Tailwind CSS","Bootstrap","Material-UI","MongoDB","PostgreSQL","MySQL","Redis","Docker","Kubernetes","AWS","Azure","Git","GitHub","GitLab","Jenkins","Jest","Cypress","Webpack","Vite"],vs=({isOpen:t,onClose:x,formType:m,initialData:l={},isEditing:_,onSubmit:c})=>{const{showError:f,showSuccess:g}=le(),[r,b]=p.useState({title:"",company:"",institution:"",start_date:"",end_date:"",description:"",technologies:"",grade:"",order_index:0,is_current:!1,...l}),[d,M]=p.useState({}),[N,G]=p.useState({}),[w,L]=p.useState(!1),[k,V]=p.useState(""),[C,O]=p.useState([]),[J,v]=p.useState(!1),[y,S]=p.useState(0),P=p.useRef(null),H=p.useRef(null);p.useEffect(()=>{const i=m==="experience"?["title","company","start_date"]:["title","institution","start_date"],h=i.filter(q=>{var I;return(I=r[q])==null?void 0:I.toString().trim()}).length,$=r.description?1:0,E=i.length+1,D=Math.round((h+$)/E*100);S(D)},[r,m]),p.useEffect(()=>{r.technologies&&O(r.technologies.split(",").map(i=>i.trim()).filter(Boolean))},[r.technologies]);const B=(i,h)=>{switch(i){case"title":if(!h.trim())return"El título es obligatorio";if(h.length<2)return"El título debe tener al menos 2 caracteres";break;case"company":case"institution":if(!h.trim())return`${m==="experience"?"La empresa":"La institución"} es obligatoria`;if(h.length<2)return"Debe tener al menos 2 caracteres";break;case"start_date":if(!h)return"La fecha de inicio es obligatoria";break;case"end_date":if(!h&&!r.is_current)return"La fecha de fin es obligatoria";if(h&&r.start_date&&h<r.start_date)return"La fecha de fin debe ser posterior a la de inicio";break;case"description":if(h.length>500)return"La descripción no puede exceder 500 caracteres";break}return null},F=(i,h)=>{b(E=>({...E,[i]:h})),G(E=>({...E,[i]:!0}));const $=B(i,h);M(E=>{const D={...E};return $?D[i]=$:delete D[i],D})},U=()=>{const i=!r.is_current;b(h=>({...h,is_current:i,end_date:i?"":h.end_date})),i&&M(h=>{const $={...h};return delete $.end_date,$})},K=i=>{if(i.trim()&&!C.includes(i.trim())){const h=[...C,i.trim()];O(h),b($=>({...$,technologies:h.join(", ")})),V(""),v(!1)}},z=i=>{const h=C.filter(($,E)=>E!==i);O(h),b($=>({...$,technologies:h.join(", ")}))},R=i=>{V(i),v(i.length>0)},ee=i=>{i.key==="Enter"&&k.trim()&&(i.preventDefault(),K(k))},W=()=>Ns.filter(i=>i.toLowerCase().includes(k.toLowerCase())&&!C.includes(i)).slice(0,8),X=()=>{const i={};if((m==="experience"?[{name:"title",value:r.title},{name:"company",value:r.company||""},{name:"start_date",value:r.start_date}]:[{name:"title",value:r.title},{name:"institution",value:r.institution||""},{name:"start_date",value:r.start_date}]).forEach(({name:E,value:D})=>{const q=B(E,D);q&&(i[E]=q)}),!r.is_current){const E=B("end_date",r.end_date);E&&(i.end_date=E)}const $=B("description",r.description);return $&&(i.description=$),M(i),Object.keys(i).length===0},Y=async i=>{if(i.preventDefault(),!X()){f("Errores de Validación","Por favor corrige los errores antes de continuar");return}L(!0);try{await c(r),g(`${m==="experience"?"Experiencia":"Educación"} ${_?"Actualizada":"Creada"}`,`Se ha ${_?"actualizado":"creado"} "${r.title}" correctamente`),x()}catch(h){f("Error al Guardar",h instanceof Error?h.message:"Error desconocido")}finally{L(!1)}};if(p.useEffect(()=>{const i=h=>{t&&(h.key==="Escape"?x():h.ctrlKey&&h.key==="Enter"&&Y(h))};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),!t)return null;const j=m==="experience",se=_?`Editar ${j?"Experiencia":"Educación"}`:`Nueva ${j?"Experiencia":"Educación"}`;return e.jsx("div",{className:a.modalOverlay,children:e.jsxs("div",{className:a.modalContainer,children:[e.jsxs("div",{className:a.modalHeader,children:[e.jsxs("div",{className:a.headerTop,children:[e.jsx("button",{type:"button",className:a.backButton,onClick:x,"aria-label":"Cerrar formulario",children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("h2",{className:a.modalTitle,children:[e.jsx("i",{className:`fas ${j?"fa-briefcase":"fa-graduation-cap"}`}),se]})]}),e.jsxs("div",{className:a.progressIndicator,children:[e.jsx("div",{className:a.progressBar,children:e.jsx("div",{className:a.progressFill,style:{width:`${y}%`}})}),e.jsxs("span",{className:a.progressText,children:["Completado: ",y,"%"]})]})]}),e.jsx("div",{className:a.modalContent,children:e.jsxs("form",{ref:P,onSubmit:Y,className:a.form,children:[e.jsxs("div",{className:a.formSection,children:[e.jsxs("h3",{className:a.sectionTitle,children:[e.jsx("i",{className:"fas fa-info-circle"}),"Información Básica"]}),e.jsxs("div",{className:a.formGrid,children:[e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:`fas ${j?"fa-briefcase":"fa-graduation-cap"}`}),j?"Título del puesto":"Título o grado"," *"]}),e.jsx("input",{type:"text",value:r.title,onChange:i=>F("title",i.target.value),className:`${a.input} ${N.title&&d.title?a.inputError:N.title&&!d.title?a.inputValid:""}`,placeholder:j?"Ej: Desarrollador Full Stack Senior":"Ej: Grado en Ingeniería Informática"}),e.jsx("div",{className:a.helperText,children:j?"Especifica tu rol o cargo principal":"Indica el nombre completo del título"}),N.title&&d.title&&e.jsxs("div",{className:a.errorText,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),d.title]})]}),e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:`fas ${j?"fa-building":"fa-university"}`}),j?"Empresa":"Institución"," *"]}),e.jsx("input",{type:"text",value:j?r.company||"":r.institution||"",onChange:i=>F(j?"company":"institution",i.target.value),className:`${a.input} ${N[j?"company":"institution"]&&d[j?"company":"institution"]?a.inputError:N[j?"company":"institution"]&&!d[j?"company":"institution"]?a.inputValid:""}`,placeholder:j?"Ej: TechCorp Solutions":"Ej: Universidad Tecnológica"}),e.jsx("div",{className:a.helperText,children:j?"Nombre de la empresa u organización":"Nombre de la universidad o centro educativo"}),N[j?"company":"institution"]&&d[j?"company":"institution"]&&e.jsxs("div",{className:a.errorText,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),d[j?"company":"institution"]]})]})]})]}),e.jsxs("div",{className:a.formSection,children:[e.jsxs("h3",{className:a.sectionTitle,children:[e.jsx("i",{className:"fas fa-calendar-alt"}),"Período de Tiempo"]}),e.jsxs("div",{className:a.dateRangeContainer,children:[e.jsxs("div",{className:a.formGrid,children:[e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:"fas fa-play"}),"Fecha de inicio *"]}),e.jsx("input",{type:"month",value:r.start_date,onChange:i=>F("start_date",i.target.value),className:`${a.input} ${N.start_date&&d.start_date?a.inputError:N.start_date&&!d.start_date?a.inputValid:""}`}),N.start_date&&d.start_date&&e.jsxs("div",{className:a.errorText,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),d.start_date]})]}),e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:"fas fa-stop"}),"Fecha de fin ",!r.is_current&&"*"]}),e.jsx("input",{type:"month",value:r.end_date,onChange:i=>F("end_date",i.target.value),disabled:r.is_current,className:`${a.input} ${r.is_current?a.inputDisabled:N.end_date&&d.end_date?a.inputError:N.end_date&&!d.end_date?a.inputValid:""}`,placeholder:r.is_current?"Actualidad":""}),N.end_date&&d.end_date&&e.jsxs("div",{className:a.errorText,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),d.end_date]})]})]}),e.jsxs("div",{className:a.currentToggle,children:[e.jsx("input",{type:"checkbox",id:"current-toggle",checked:r.is_current,onChange:U,className:a.checkbox}),e.jsx("label",{htmlFor:"current-toggle",className:a.checkboxLabel,children:j?"Trabajo actual":"Estudios en curso"})]})]})]}),j&&e.jsxs("div",{className:a.formSection,children:[e.jsxs("h3",{className:a.sectionTitle,children:[e.jsx("i",{className:"fas fa-code"}),"Tecnologías y Herramientas"]}),e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:"fas fa-tools"}),"Tecnologías utilizadas"]}),e.jsxs("div",{className:a.technologyContainer,children:[e.jsx("input",{ref:H,type:"text",value:k,onChange:i=>R(i.target.value),onKeyDown:ee,onFocus:()=>v(k.length>0),onBlur:()=>setTimeout(()=>v(!1),200),className:a.technologyInput,placeholder:"Escribe y presiona Enter para agregar..."}),J&&W().length>0&&e.jsx("div",{className:a.suggestions,children:W().map(i=>e.jsx("div",{className:a.suggestionItem,onClick:()=>K(i),children:i},i))})]}),C.length>0&&e.jsx("div",{className:a.technologyChips,children:C.map((i,h)=>e.jsxs("span",{className:a.chip,children:[i,e.jsx("button",{type:"button",onClick:()=>z(h),className:a.chipRemove,"aria-label":`Eliminar ${i}`,children:e.jsx("i",{className:"fas fa-times"})})]},h))}),e.jsx("div",{className:a.helperText,children:"Agrega las tecnologías más relevantes de este puesto"})]})]}),!j&&e.jsxs("div",{className:a.formSection,children:[e.jsxs("h3",{className:a.sectionTitle,children:[e.jsx("i",{className:"fas fa-medal"}),"Detalles Académicos"]}),e.jsxs("div",{className:a.formGrid,children:[e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:"fas fa-star"}),"Calificación"]}),e.jsx("input",{type:"text",value:r.grade||"",onChange:i=>F("grade",i.target.value),className:a.input,placeholder:"Ej: Sobresaliente, 8.5/10, Matrícula de Honor"}),e.jsx("div",{className:a.helperText,children:"Nota media, mención o reconocimiento obtenido"})]}),e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:"fas fa-sort-numeric-up"}),"Orden de visualización"]}),e.jsx("input",{type:"number",value:r.order_index||0,onChange:i=>F("order_index",i.target.value),className:a.input,min:"0",placeholder:"0"}),e.jsx("div",{className:a.helperText,children:"Número para ordenar la visualización"})]})]})]}),e.jsxs("div",{className:a.formSection,children:[e.jsxs("h3",{className:a.sectionTitle,children:[e.jsx("i",{className:"fas fa-align-left"}),"Descripción y Detalles"]}),e.jsxs("div",{className:a.formField,children:[e.jsxs("label",{className:a.label,children:[e.jsx("i",{className:"fas fa-file-text"}),"Descripción"]}),e.jsxs("div",{className:a.textareaContainer,children:[e.jsx("textarea",{value:r.description,onChange:i=>F("description",i.target.value),className:`${a.textarea} ${N.description&&d.description?a.textareaError:""}`,rows:5,maxLength:500,placeholder:j?"Describe tus responsabilidades, logros y proyectos destacados...":"Describe la especialización, proyectos destacados, etc..."}),e.jsxs("div",{className:`${a.characterCounter} ${r.description.length>450?a.warning:r.description.length>480?a.error:""}`,children:[r.description.length,"/500 caracteres"]})]}),N.description&&d.description&&e.jsxs("div",{className:a.errorText,children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),d.description]}),e.jsx("div",{className:a.helperText,children:"Máximo 500 caracteres. Enfócate en logros y responsabilidades clave"})]})]})]})}),e.jsxs("div",{className:a.stickyFooter,children:[e.jsxs("div",{className:a.footerContent,children:[e.jsx("div",{className:a.saveIndicator,children:w&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`fas fa-spinner ${a.spinning}`}),"Guardando cambios..."]})}),e.jsxs("div",{className:a.actions,children:[e.jsxs("button",{type:"button",onClick:x,disabled:w,className:`${a.button} ${a.buttonSecondary}`,children:[e.jsx("i",{className:"fas fa-times"}),"Cancelar"]}),e.jsx("button",{type:"submit",onClick:Y,disabled:w||Object.keys(d).length>0,className:`${a.button} ${a.buttonPrimary}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`fas fa-spinner ${a.spinning}`}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save"}),_?"Guardar Cambios":`Crear ${j?"Experiencia":"Educación"}`]})})]})]}),e.jsxs("div",{className:a.shortcuts,children:[e.jsxs("span",{children:[e.jsx("kbd",{children:"Esc"})," Cerrar"]}),e.jsxs("span",{children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"Enter"})," Guardar"]})]})]})]})})},ys=()=>{const[t,x]=p.useState(!1);return p.useEffect(()=>{const m=()=>{x(window.innerWidth<=768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),t},Ss=({className:t,showAdminFAB:x=!1,onAdminClick:m})=>{const[l,_]=p.useState([]),[c,f]=p.useState([]),[g,r]=p.useState(!0),[b,d]=p.useState(null),M=ys(),[N,G]=p.useState("traditional");p.useEffect(()=>{G(M?"chronological":"traditional")},[M]);const[w,L]=p.useState(0),[k,V]=p.useState(!1),[C,O]=p.useState("experience"),[J,v]=p.useState(!1),[y,S]=p.useState(null),[P,H]=p.useState(null),[B,F]=p.useState({title:"",company:"",start_date:"",end_date:"",description:"",technologies:"",order_index:0}),[U,K]=p.useState({title:"",institution:"",start_date:"",end_date:"",description:"",grade:"",order_index:0}),{showSuccess:z,showError:R}=le(),ee=ve(),W=p.useCallback(async()=>{try{const s=await re();f(Array.isArray(s)?s:[])}catch(s){console.error("Error loading education:",s),f([]),R("Error","No se pudo cargar la información de educación")}},[R]),X=p.useCallback(async()=>{if(!(w>=3)){r(!0),d(null);try{const s=await oe();_(s),r(!1),L(0)}catch{L(o=>o+1),d(`Error al cargar experiencias (Intento ${w+1}/3)`),r(!1),w<2&&setTimeout(()=>X(),2e3)}}},[w]);p.useEffect(()=>{(async()=>{try{const[o,n]=await Promise.allSettled([oe(),re()]);o.status==="fulfilled"?_(Array.isArray(o.value)?o.value:[]):(console.error("Error loading experiences:",o.reason),_([]),d("Usando datos de ejemplo para experiencias (API no disponible)")),n.status==="fulfilled"?f(Array.isArray(n.value)?n.value:[]):(console.error("Error loading education:",n.reason),f([]),await W(),b||d("Usando datos de ejemplo para educación (API no disponible)")),r(!1)}catch(o){console.error("Error loading data:",o),d("Error al cargar datos"),r(!1)}})()},[W]);const Y=p.useCallback(s=>{G(s)},[]),j=s=>{var o;F({title:s.position,company:s.company,start_date:s.start_date,end_date:s.end_date,description:s.description||"",technologies:((o=s.technologies)==null?void 0:o.join(", "))||"",order_index:s.order_index}),S(s._id),H("experience"),v(!0)},se=s=>{var o;K({title:s.title,institution:s.institution,start_date:s.start_date,end_date:s.end_date,description:s.description||"",grade:s.grade||"",order_index:s.order_index||0}),S(((o=s.id)==null?void 0:o.toString())||""),H("education"),v(!0)},i=async(s,o)=>{if(confirm(`¿Estás seguro de eliminar la experiencia "${o}"?`))try{await be(s),_(n=>Array.isArray(n)?n.filter(u=>u._id!==s):[]),z("Experiencia Eliminada",`Se ha eliminado "${o}" correctamente`)}catch(n){console.error("Error eliminando experiencia:",n),R("Error","No se pudo eliminar la experiencia laboral")}},h=async(s,o)=>{if(!s){R("Error","ID de educación no válido");return}if(confirm(`¿Estás seguro de eliminar la formación "${o}"?`))try{await je(String(s)),f(n=>Array.isArray(n)?n.filter(u=>u.id!==s&&u._id!==String(s)):[]),z("Formación Eliminada",`Se ha eliminado "${o}" correctamente`)}catch(n){console.error("Error eliminando educación:",n),R("Error","No se pudo eliminar la formación académica")}},$=()=>{ie(),S(null),H(C),v(!0)},E=()=>{v(!1),S(null),H(null),ie()},D=()=>!Array.isArray(l)||l.length===0?e.jsxs("div",{className:"admin-empty",children:[e.jsx("i",{className:"fas fa-briefcase"}),e.jsx("h3",{children:"No hay experiencias"}),e.jsx("p",{children:"Añade la primera experiencia laboral usando el botón flotante."})]}):e.jsx("div",{className:"admin-items-list",children:l.sort((s,o)=>{const n=I(s.end_date);return I(o.end_date)-n}).map(s=>e.jsxs("div",{className:"admin-item-card",children:[e.jsxs("div",{className:"admin-item-header",children:[e.jsx("div",{className:"admin-item-image",children:e.jsx("div",{className:"admin-item-icon",children:e.jsx("i",{className:"fas fa-briefcase"})})}),e.jsxs("div",{className:"admin-item-info",children:[e.jsx("h3",{className:"admin-item-title",children:s.position}),e.jsx("p",{className:"admin-item-subtitle",children:s.company}),"                ",e.jsx("div",{className:"admin-exp-metadata",children:e.jsxs("div",{className:"admin-item-date",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:Q(s.start_date,s.end_date)})]})}),s.description&&e.jsx("div",{className:"admin-item-description",children:e.jsx("p",{children:s.description.length>100?`${s.description.substring(0,100)}...`:s.description})}),s.technologies&&s.technologies.length>0&&e.jsx("div",{className:"admin-item-technologies",children:e.jsx("div",{className:"admin-tech-list",children:s.technologies.map((o,n)=>e.jsx("span",{className:"admin-tech-tag",children:o},n))})})]})]}),e.jsxs("div",{className:"admin-item-actions",children:[e.jsxs("button",{className:"admin-btn-secondary",onClick:()=>j(s),children:[e.jsx("i",{className:"fas fa-edit"}),"Editar"]}),e.jsxs("button",{className:"admin-btn-danger",onClick:()=>i(s._id,s.position),children:[e.jsx("i",{className:"fas fa-trash"}),"Eliminar"]})]})]},s._id))}),q=()=>!Array.isArray(c)||c.length===0?e.jsxs("div",{className:"admin-empty",children:[e.jsx("i",{className:"fas fa-graduation-cap"}),e.jsx("h3",{children:"No hay formación académica"}),e.jsx("p",{children:"Añade la primera formación académica usando el botón flotante."})]}):e.jsx("div",{className:"admin-items-list",children:c.sort((s,o)=>{const n=I(s.end_date);return I(o.end_date)-n}).map(s=>e.jsxs("div",{className:"admin-item-card",children:[e.jsxs("div",{className:"admin-item-header",children:[e.jsx("div",{className:"admin-item-image",children:e.jsx("div",{className:"admin-item-icon",children:e.jsx("i",{className:"fas fa-graduation-cap"})})}),e.jsxs("div",{className:"admin-item-info",children:[e.jsx("h3",{className:"admin-item-title",children:s.title}),e.jsx("p",{className:"admin-item-subtitle",children:s.institution}),e.jsxs("div",{className:"admin-edu-metadata",children:[e.jsxs("div",{className:"admin-item-date",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:Q(s.start_date,s.end_date)})]}),s.grade&&e.jsxs("div",{className:"admin-item-grade",children:[e.jsx("i",{className:"fas fa-medal"}),e.jsx("span",{children:s.grade})]})]}),s.description&&e.jsx("div",{className:"admin-item-description",children:e.jsx("p",{children:s.description.length>100?`${s.description.substring(0,100)}...`:s.description})})]})]}),e.jsxs("div",{className:"admin-item-actions",children:[e.jsxs("button",{className:"admin-btn-secondary",onClick:()=>se(s),children:[e.jsx("i",{className:"fas fa-edit"}),"Editar"]}),e.jsxs("button",{className:"admin-btn-danger",onClick:()=>{const o=s._id||s.id;o&&h(o,s.title)},children:[e.jsx("i",{className:"fas fa-trash"}),"Eliminar"]})]})]},s._id||s.id))}),I=s=>{if(!s||s.trim()==="")return 0;if(s==="Presente")return new Date().getFullYear()*12+new Date().getMonth();if(/^\d{4}$/.test(s))return parseInt(s)*12;const o=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],n=s.split(" ");if(n.length>=2){const[T,A]=n,ae=o.indexOf(T),Z=parseInt(A);if(ae!==-1&&!isNaN(Z))return Z*12+ae}const u=parseInt(s);return isNaN(u)?0:u*12},de=async s=>{try{if(P==="experience"){const n={position:s.title,company:s.company,start_date:s.start_date,end_date:s.end_date,description:s.description,technologies:s.technologies?s.technologies.split(",").map(u=>u.trim()).filter(u=>u):[],is_current:s.end_date===""||s.end_date==="Presente",order_index:s.order_index,user_id:"1"};if(y){const u=await pe(y,n),T=l.map(A=>A._id===y?{...A,...u}:A);_(T),z("Experiencia Actualizada",`Se ha actualizado "${n.position}" correctamente`)}else{const u=await xe(n);_([...l,u]),z("Nueva Experiencia Creada",`Se ha creado "${u.position}" correctamente`)}}else{const n={title:s.title,institution:s.institution,start_date:s.start_date,end_date:s.end_date,description:s.description,grade:s.grade,order_index:s.order_index,user_id:1};if(y){const u=await fe(parseInt(y),n),T=(Array.isArray(c)?c:[]).map(A=>{var Z;return((Z=A._id||A.id)==null?void 0:Z.toString())===y?{...A,...u}:A});f(T),z("Educación Actualizada",`Se ha actualizado "${n.title}" correctamente`)}else{const u=await ge(n);f([...Array.isArray(c)?c:[],u]),z("Nueva Formación Académica Creada",`Se ha creado "${u.title}" correctamente`)}}E()}catch(o){console.error("Error al guardar:",o);const n=o instanceof Error?o.message:"Error desconocido";R("Error al Guardar",`No se pudo guardar ${P==="experience"?"la experiencia":"la educación"}: ${n}`)}},ie=()=>{F({title:"",company:"",start_date:"",end_date:"",description:"",technologies:"",order_index:0}),K({title:"",institution:"",start_date:"",end_date:"",description:"",grade:"",order_index:0})},me=()=>{const s=P==="experience",o=s?B:U,n=T=>T?/^\d{4}-\d{2}(-\d{2})?$/.test(T)?T:(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(T),ce(T)):"",u={title:o.title,company:s?B.company:void 0,institution:s?void 0:U.institution,start_date:n(o.start_date),end_date:n(o.end_date),description:o.description,technologies:s?B.technologies:void 0,grade:s?void 0:U.grade,order_index:o.order_index,is_current:o.end_date==="Actualmente"||o.end_date==="Presente"};return e.jsx(vs,{isOpen:!0,onClose:E,formType:P,initialData:u,isEditing:!!y,onSubmit:de})},he=()=>J?me():C==="experience"?g?e.jsxs("div",{className:"admin-loading",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("p",{children:"Cargando experiencias..."})]}):D():q();return g?e.jsx("section",{className:`cv-section ${t||""}`,children:e.jsxs("div",{className:"experience-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando experiencia y formación..."}),e.jsx("div",{className:"loading-details",children:e.jsx("small",{children:"Obteniendo datos del servidor..."})})]})}):b&&l.length===0?e.jsx("section",{className:`cv-section ${t||""}`,children:e.jsxs("div",{className:"experience-error",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),e.jsx("p",{children:b}),e.jsxs("button",{className:"retry-button",onClick:X,disabled:w>=3,children:[e.jsx("i",{className:"fas fa-redo"}),w>=3?"Límite de reintentos alcanzado":"Reintentar"]})]})}):e.jsxs("section",{className:`section-cv ${t||""}`,id:"experience",children:[e.jsx(_e,{icon:"fas fa-route",title:"Trayectoria Profesional",subtitle:"Un recorrido por mi experiencia laboral y formación académica, mostrando las tecnologías y logros más relevantes.",className:"experience",showNotification:!!(b&&l.length>0),notificationMessage:b||void 0,notificationIcon:"fas fa-info-circle"}),e.jsxs("div",{className:"section-container",ref:ee,children:[e.jsxs("div",{className:"view-toggle-container",children:[e.jsxs("button",{className:`view-toggle-btn ${N==="traditional"?"active":""}`,onClick:()=>Y("traditional"),"aria-label":"Vista por categorías",children:[e.jsx("i",{className:"fas fa-columns"}),e.jsx("span",{children:"Vista por Categorías"})]}),e.jsxs("button",{className:`view-toggle-btn ${N==="chronological"?"active":""}`,onClick:()=>Y("chronological"),"aria-label":"Vista cronológica",children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:"Vista Cronológica"})]})]}),e.jsxs("div",{className:"experience-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:l.length}),e.jsx("span",{className:"stat-label",children:"Experiencias"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:Array.isArray(c)?c.length:0}),e.jsx("span",{className:"stat-label",children:"Certificaciones"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:Array.isArray(l)?l.reduce((s,o)=>{var n;return s+(((n=o.technologies)==null?void 0:n.length)||0)},0):0}),e.jsx("span",{className:"stat-label",children:"Tecnologías"})]})]}),"        ",N==="traditional"&&e.jsxs("div",{className:"experience-grid traditional-view",children:[e.jsxs("div",{className:"experience-column",children:[e.jsxs("div",{className:"column-header",children:[e.jsx("div",{className:"column-icon",children:e.jsx("i",{className:"fas fa-briefcase"})}),e.jsx("h3",{className:"column-title strong-contrast",children:"Experiencia Laboral"})]}),"              ",e.jsx("div",{className:"timeline-container",children:Array.isArray(l)?l.sort((s,o)=>{const n=s.end_date?I(s.end_date):0;return(o.end_date?I(o.end_date):0)-n}).map((s,o)=>e.jsx(ye,{experience:s,index:o},s._id)):e.jsx("div",{children:"Cargando experiencias..."})})]}),e.jsxs("div",{className:"education-column",children:[e.jsxs("div",{className:"column-header",children:[e.jsx("div",{className:"column-icon",children:e.jsx("i",{className:"fas fa-graduation-cap"})}),e.jsx("h3",{className:"column-title strong-contrast",children:"Formación Académica"})]}),"              ",e.jsx("div",{className:"timeline-container",children:(Array.isArray(c)?c:[]).sort((s,o)=>{const n=I(s.end_date);return I(o.end_date)-n}).map((s,o)=>e.jsx(Ee,{education:s,index:o+(Array.isArray(l)?l.length:0)},s._id||s.id||o))})]})]}),"        ",N==="chronological"&&e.jsx("div",{className:"chronological-view",children:e.jsxs("div",{className:"chronological-timeline",children:[e.jsx("div",{className:"timeline-line"}),[...(Array.isArray(l)?l:[]).map(n=>({_id:n._id,title:n.position,start_date:n.start_date,end_date:n.end_date,description:n.description,type:"experience",company:n.company,technologies:n.technologies})),...(Array.isArray(c)?c:[]).map(n=>{var u;return{_id:((u=n._id||n.id)==null?void 0:u.toString())||"",id:typeof n.id=="number"?n.id:void 0,title:n.title,start_date:n.start_date,end_date:n.end_date,description:n.description,type:"education",institution:n.institution,grade:n.grade}})].sort((n,u)=>{const T=n.end_date?I(n.end_date):0;return(u.end_date?I(u.end_date):0)-T}).map((n,u)=>e.jsx(Ce,{item:n,index:u,position:u%2===0?"left":"right"},`${n.type}-${n._id||String(n.id)}`))]})})]}),x&&e.jsx(ue,{onClick:()=>{V(!0),m==null||m()},icon:"fas fa-cog",label:"Administrar Experiencia",position:"bottom-right",color:"primary",ariaLabel:"Administrar experiencia laboral"}),"      ",e.jsx(Ne,{isOpen:k,onClose:()=>V(!1),title:"Administración de Trayectoria",icon:"fas fa-route",maxWidth:"1300px",height:"88vh",tabs:[{id:"experience",label:"Experiencia Laboral",icon:"fas fa-briefcase",content:null},{id:"education",label:"Formación Académica",icon:"fas fa-graduation-cap",content:null}],activeTab:C,onTabChange:s=>O(s),showTabs:!0,floatingActions:J?[{id:"cancel-form",label:"Cancelar",icon:"fas fa-times",onClick:E,variant:"secondary"},{id:"save-form",label:y?"Guardar Cambios":`Crear ${C==="experience"?"Experiencia":"Educación"}`,icon:"fas fa-save",onClick:()=>{const s=document.querySelector(".admin-form");s&&s.requestSubmit()},variant:"primary"}]:[{id:"new-item",label:`Nueva ${C==="experience"?"Experiencia":"Educación"}`,icon:"fas fa-plus",onClick:$,variant:"primary"}],children:e.jsxs("div",{className:"admin-content-wrapper",children:["          ",e.jsx("div",{className:"admin-main-content",children:he()})]})})]})};export{Ss as default};
