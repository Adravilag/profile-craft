import{r as L,x as ie,j as e,M as J,C as F,D as K,E as oe,G as le,H as re,R as g,I as ce}from"./index-gtjkzy3b.js";import{F as de}from"./FloatingActionButtonGroup-Cnl7_kT4.js";import{H as me}from"./HeaderSection-UWc47PYy.js";const pe="_testimonialsAdminOverlay_1ftdg_4",_e="_testimonialsAdminModal_1ftdg_30",ue="_adminHeader_1ftdg_60",he="_pendingBadge_1ftdg_99",xe="_closeBtn_1ftdg_124",fe="_adminFilters_1ftdg_144",ge="_filterBtn_1ftdg_164",je="_active_1ftdg_204",ve="_adminContent_1ftdg_226",be="_loading_1ftdg_253",Ne="_emptyState_1ftdg_254",ye="_adminTestimonialsList_1ftdg_315",$e="_adminTestimonialCard_1ftdg_323",Se="_testimonialHeader_1ftdg_362",we="_testimonialMeta_1ftdg_370",Ce="_testimonialAvatar_1ftdg_377",Ee="_testimonialInfo_1ftdg_439",Te="_position_1ftdg_452",Be="_email_1ftdg_461",Le="_website_1ftdg_462",Ae="_testimonialRating_1ftdg_497",Ie="_ratingLabel_1ftdg_505",ke="_ratingStars_1ftdg_511",Fe="_starFilled_1ftdg_517",Me="_starEmpty_1ftdg_523",He="_ratingNumber_1ftdg_528",De="_testimonialStatus_1ftdg_536",Re="_statusBadge_1ftdg_543",Pe="_createdDate_1ftdg_571",qe="_testimonialContent_1ftdg_585",ze="_testimonialActions_1ftdg_624",Ge="_actionBtn_1ftdg_634",Ve="_approveBtn_1ftdg_684",Oe="_rejectBtn_1ftdg_696",We="_deleteBtn_1ftdg_708",Qe="_processing_1ftdg_721",Ue="_modalProcessing_1ftdg_780",n={testimonialsAdminOverlay:pe,testimonialsAdminModal:_e,adminHeader:ue,pendingBadge:he,closeBtn:xe,adminFilters:fe,filterBtn:ge,active:je,adminContent:ve,loading:be,emptyState:Ne,adminTestimonialsList:ye,adminTestimonialCard:$e,testimonialHeader:Se,testimonialMeta:we,testimonialAvatar:Ce,testimonialInfo:Ee,position:Te,email:Be,website:Le,testimonialRating:Ae,ratingLabel:Ie,ratingStars:ke,starFilled:Fe,starEmpty:Me,ratingNumber:He,testimonialStatus:De,statusBadge:Re,createdDate:Pe,testimonialContent:qe,testimonialActions:ze,actionBtn:Ge,approveBtn:Ve,rejectBtn:Oe,deleteBtn:We,processing:Qe,modalProcessing:Ue},Je=({onClose:b,onTestimonialsChange:f})=>{const[A,P]=L.useState([]),[N,y]=L.useState([]),[q,c]=L.useState(!0),[r,u]=L.useState(null),[d,$]=L.useState("pending"),{showSuccess:S,showError:w}=ie(),j=async()=>{try{c(!0);const s=await F(d==="all"?void 0:d);if(P(s),N.length===0){const m=await F();y(m)}}catch{w("Error al cargar testimonios")}finally{c(!1)}};L.useEffect(()=>{j()},[d]);const E=async s=>{if(!r){u(s);try{await oe(s,A.length),S("Testimonio aprobado");const m=await F();y(m),j(),f==null||f()}catch{w("Error al aprobar testimonio")}finally{u(null)}}},C=async s=>{if(!r){u(s);try{await le(s),S("Testimonio rechazado");const m=await F();y(m),j(),f==null||f()}catch{w("Error al rechazar testimonio")}finally{u(null)}}},z=async s=>{if(!r&&confirm("¿Estás seguro de que quieres eliminar este testimonio?")){u(s);try{await re(s),S("Testimonio eliminado");const m=await F();y(m),j(),f==null||f()}catch{w("Error al eliminar testimonio")}finally{u(null)}}},M=s=>K({name:s.name,email:s.email,avatar:s.avatar_url}),G=s=>{switch(s){case"approved":return"#4caf50";case"rejected":return"#f44336";case"pending":return"#ff9800";default:return"#9e9e9e"}},H=s=>{switch(s){case"approved":return"Aprobado";case"rejected":return"Rechazado";case"pending":return"Pendiente";default:return"Desconocido"}},T=N.filter(s=>s.status==="pending").length;return e.jsx(J,{children:e.jsx("div",{className:n.testimonialsAdminOverlay,children:e.jsxs("div",{className:`${n.testimonialsAdminModal} ${r?n.modalProcessing:""}`,children:[e.jsxs("div",{className:n.adminHeader,children:[e.jsxs("h2",{children:[e.jsx("i",{className:"fas fa-shield-alt"}),"Administración de Testimonios",T>0&&e.jsxs("span",{className:n.pendingBadge,children:[T," pendientes"]})]}),e.jsx("button",{className:n.closeBtn,onClick:b,children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:n.adminFilters,children:[e.jsxs("button",{className:`${n.filterBtn} ${d==="pending"?n.active:""}`,onClick:()=>$("pending"),children:["Pendientes (",N.filter(s=>s.status==="pending").length,")"]}),e.jsxs("button",{className:`${n.filterBtn} ${d==="approved"?n.active:""}`,onClick:()=>$("approved"),children:["Aprobados (",N.filter(s=>s.status==="approved").length,")"]}),e.jsxs("button",{className:`${n.filterBtn} ${d==="rejected"?n.active:""}`,onClick:()=>$("rejected"),children:["Rechazados (",N.filter(s=>s.status==="rejected").length,")"]}),e.jsxs("button",{className:`${n.filterBtn} ${d==="all"?n.active:""}`,onClick:()=>$("all"),children:["Todos (",N.length,")"]})]}),e.jsx("div",{className:n.adminContent,children:q?e.jsxs("div",{className:n.loading,children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),"Cargando testimonios..."]}):A.length===0?e.jsxs("div",{className:n.emptyState,children:[e.jsx("i",{className:"fas fa-inbox"}),e.jsxs("p",{children:["No hay testimonios"," ",d!=="all"?`${d==="pending"?"pendientes":d==="approved"?"aprobados":"rechazados"}`:""]})]}):e.jsx("div",{className:n.adminTestimonialsList,children:A.map(s=>e.jsxs("div",{className:n.adminTestimonialCard,children:[e.jsxs("div",{className:n.testimonialHeader,children:[e.jsxs("div",{className:n.testimonialMeta,children:[e.jsx("img",{src:M(s),alt:`Avatar de ${s.name}`,className:n.testimonialAvatar,loading:"lazy"}),e.jsxs("div",{className:n.testimonialInfo,children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{className:n.position,children:[s.position,s.company&&` en ${s.company}`]}),s.email&&e.jsxs("p",{className:n.email,children:[e.jsx("i",{className:"fas fa-envelope"}),s.email]}),s.website&&e.jsxs("p",{className:n.website,children:[e.jsx("i",{className:"fas fa-link"}),e.jsx("a",{href:s.website.startsWith("http")?s.website:`https://${s.website}`,target:"_blank",rel:"noopener noreferrer",children:s.website})]}),e.jsxs("div",{className:n.testimonialRating,children:[e.jsx("span",{className:n.ratingLabel,children:"Valoración:"}),e.jsxs("div",{className:n.ratingStars,children:[[1,2,3,4,5].map(m=>e.jsx("i",{className:`fas fa-star ${m<=(s.rating||5)?n.starFilled:n.starEmpty}`},m)),e.jsxs("span",{className:n.ratingNumber,children:["(",s.rating||5,"/5)"]})]})]})]})]}),e.jsxs("div",{className:n.testimonialStatus,children:[e.jsx("span",{className:n.statusBadge,style:{backgroundColor:G(s.status||"pending")},children:H(s.status||"pending")}),e.jsx("span",{className:n.createdDate,children:s.created_at&&new Date(s.created_at).toLocaleDateString("es-ES")})]})]}),e.jsx("div",{className:n.testimonialContent,children:e.jsx("p",{children:s.text})}),e.jsxs("div",{className:n.testimonialActions,children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`${n.actionBtn} ${n.approveBtn} ${r===s._id?n.processing:""}`,onClick:()=>E(s._id),title:"Aprobar este testimonio",disabled:r!==null,children:[e.jsx("i",{className:r===s._id?"fas fa-spinner fa-spin":"fas fa-check"}),"Aprobar"]}),e.jsxs("button",{className:`${n.actionBtn} ${n.rejectBtn} ${r===s._id?n.processing:""}`,onClick:()=>C(s._id),title:"Rechazar este testimonio",disabled:r!==null,children:[e.jsx("i",{className:r===s._id?"fas fa-spinner fa-spin":"fas fa-times"}),"Rechazar"]})]}),s.status==="rejected"&&e.jsxs("button",{className:`${n.actionBtn} ${n.approveBtn} ${r===s._id?n.processing:""}`,onClick:()=>E(s._id),title:"Aprobar este testimonio",disabled:r!==null,children:[e.jsx("i",{className:r===s._id?"fas fa-spinner fa-spin":"fas fa-check"}),"Aprobar"]}),s.status==="approved"&&e.jsxs("button",{className:`${n.actionBtn} ${n.rejectBtn} ${r===s._id?n.processing:""}`,onClick:()=>C(s._id),title:"Quitar aprobación",disabled:r!==null,children:[e.jsx("i",{className:r===s._id?"fas fa-spinner fa-spin":"fas fa-ban"}),"Quitar aprobación"]}),e.jsxs("button",{className:`${n.actionBtn} ${n.deleteBtn} ${r===s._id?n.processing:""}`,onClick:()=>z(s._id),title:"Eliminar permanentemente",disabled:r!==null,children:[e.jsx("i",{className:r===s._id?"fas fa-spinner fa-spin":"fas fa-trash"}),"Eliminar"]})]})]},s._id||s.id))})})]})})})},Ke="_testimonials_1cxps_53",Xe="_expanded_1cxps_117",Ye="_shimmerIdle_1cxps_1",Ze="_pulseCard_1cxps_1",et="_skeletonShine_1cxps_1",tt="_star_1cxps_616",st="_starGlow_1cxps_1",at="_fadeIn_1cxps_1",nt="_slideIn_1cxps_1",it="_slideInMobile_1cxps_1",ot="_slideInFullscreen_1cxps_1",lt="_scrolled_1cxps_1449",rt="_modalFadeIn_1cxps_1",ct="_modalSlideInMobile_1cxps_1",dt="_primary_1cxps_1797",t={testimonials:Ke,"testimonials-grid":"_testimonials-grid_1cxps_66","testimonial-card":"_testimonial-card_1cxps_93",expanded:Xe,shimmerIdle:Ye,"testimonial-animate":"_testimonial-animate_1cxps_271",pulseCard:Ze,"testimonial-header":"_testimonial-header_1cxps_285","testimonial-avatar-wrapper":"_testimonial-avatar-wrapper_1cxps_293",skeletonShine:et,"testimonial-avatar":"_testimonial-avatar_1cxps_293","testimonial-body":"_testimonial-body_1cxps_349","testimonial-text-container":"_testimonial-text-container_1cxps_360","testimonial-text":"_testimonial-text_1cxps_360","testimonial-footer-actions":"_testimonial-footer-actions_1cxps_501","read-more-btn":"_read-more-btn_1cxps_526","rating-stars":"_rating-stars_1cxps_589",star:tt,"star-filled":"_star-filled_1cxps_621",starGlow:st,"star-empty":"_star-empty_1cxps_626","rating-input-container":"_rating-input-container_1cxps_637","interactive-stars":"_interactive-stars_1cxps_644","star-button":"_star-button_1cxps_652","star-active":"_star-active_1cxps_673","star-inactive":"_star-inactive_1cxps_678","rating-text":"_rating-text_1cxps_682","rating-help":"_rating-help_1cxps_688","testimonial-date":"_testimonial-date_1cxps_700","testimonial-footer":"_testimonial-footer_1cxps_501","testimonial-author":"_testimonial-author_1cxps_727","author-info":"_author-info_1cxps_735","author-name":"_author-name_1cxps_743","author-position":"_author-position_1cxps_750","author-website":"_author-website_1cxps_757","testimonial-actions":"_testimonial-actions_1cxps_784","edit-btn":"_edit-btn_1cxps_799","delete-btn":"_delete-btn_1cxps_800","empty-state":"_empty-state_1cxps_840","empty-icon":"_empty-icon_1cxps_846","empty-title":"_empty-title_1cxps_851","empty-description":"_empty-description_1cxps_856","modal-overlay":"_modal-overlay_1cxps_867",fadeIn:at,"modal-content":"_modal-content_1cxps_879",slideIn:nt,"modal-header":"_modal-header_1cxps_890","modal-title":"_modal-title_1cxps_897","modal-close":"_modal-close_1cxps_905","modal-form":"_modal-form_1cxps_925","form-grid":"_form-grid_1cxps_931","form-group":"_form-group_1cxps_937","optional-fields":"_optional-fields_1cxps_1089","modal-actions":"_modal-actions_1cxps_1093","btn-primary":"_btn-primary_1cxps_1099","btn-secondary":"_btn-secondary_1cxps_1100","optional-toggle-btn":"_optional-toggle-btn_1cxps_1182","optional-hide-btn":"_optional-hide-btn_1cxps_1183",slideInMobile:it,slideInFullscreen:ot,scrolled:lt,"has-more-content":"_has-more-content_1cxps_1470",modalFadeIn:rt,modalSlideInMobile:ct,"testimonial-form":"_testimonial-form_1cxps_1658","admin-form":"_admin-form_1cxps_1658","form-row":"_form-row_1cxps_1667","rating-admin-group":"_rating-admin-group_1cxps_1716","rating-admin-container":"_rating-admin-container_1cxps_1729","star-button-admin":"_star-button-admin_1cxps_1735","rating-text-admin":"_rating-text-admin_1cxps_1764","form-actions":"_form-actions_1cxps_1777","action-button":"_action-button_1cxps_1784",primary:dt},R={name:"",position:"",text:"",email:"",company:"",website:"",rating:5},ut=({testimonials:b,onAdd:f,onEdit:A,onDelete:P,onTestimonialsChange:N,isAdminMode:y=!1,showAdminFAB:q=!1})=>{const[c,r]=g.useState(R),[u,d]=g.useState(null),[$,S]=g.useState(null),[w,j]=g.useState(!1),[E,C]=g.useState(!1),[z,M]=g.useState(!1),[G,H]=g.useState(!1),T=g.useRef(null),[s,m]=g.useState(new Set),Q=a=>a.length>300,X=(a,i)=>!Q(a)||i?a:a.substring(0,300)+"...",Y=a=>{m(i=>{const o=new Set(i),p=!o.has(a);if(o.has(a)?o.delete(a):o.add(a),p)setTimeout(()=>{const l=document.getElementById(`testimonial-text-${a}`),_=l==null?void 0:l.closest(`.${t["testimonial-card"]}`),h=l==null?void 0:l.closest(`.${t["testimonial-text-container"]}`);_&&l&&h&&(l.classList.add(t.expanding),_.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),_.classList.add(t["testimonial-animate"]),setTimeout(()=>{if(l){if(l.scrollHeight>l.clientHeight){l.classList.add("has-scroll"),h.classList.add("has-scroll");const k=()=>{const O=l.scrollTop,W=l.scrollHeight,D=l.clientHeight,v=O/(W-D)*100;h.style.setProperty("--scroll-percentage",`${v}%`),v>95?h.classList.add("scroll-end-reached"):h.classList.remove("scroll-end-reached")};l.addEventListener("scroll",k),setTimeout(()=>{l.removeEventListener("scroll",k)},3e4)}else l.classList.remove("has-scroll"),h.classList.remove("has-scroll");setTimeout(()=>{l.classList.remove(t.expanding)},600)}_.classList.remove(t["testimonial-animate"])},200))},100);else{const l=document.getElementById(`testimonial-text-${a}`),_=l==null?void 0:l.closest(`.${t["testimonial-text-container"]}`);l&&_&&(l.classList.remove("has-scroll"),_.classList.remove("has-scroll"),_.classList.remove("scroll-end-reached"),_.style.removeProperty("--scroll-percentage"))}return o})},Z=a=>{if(!a)return"";try{return new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return""}};g.useEffect(()=>{const a=()=>{if(!T.current)return;const i=T.current.getBoundingClientRect();i.top<=(window.innerHeight||document.documentElement.clientHeight)/2&&i.bottom>=100?(document.body.classList.add("testimonials-section-active"),M(!0)):(document.body.classList.remove("testimonials-section-active"),M(!1))};return a(),window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const x=a=>{const{name:i,value:o}=a.target;r(p=>({...p,[i]:o}))},U=a=>{a.preventDefault(),u?(A(u,c),S(u)):(f({...c,user_id:1,order_index:b.length}),S(-1)),r(R),d(null),j(!1),C(!1),setTimeout(()=>S(null),800)},ee=a=>{r({name:a.name,position:a.position,text:a.text,email:"",company:a.company||"",website:a.website||"",rating:a.rating||5}),d(a.id),C(!0),(a.company||a.website)&&j(!0)},V=()=>{C(!1),r(R),d(null),j(!1)},te=a=>{ce(a)},se=a=>{const i=a??5,o=[];for(let p=1;p<=5;p++)o.push(e.jsx("span",{className:`${t.star} ${p<=i?t["star-filled"]:t["star-empty"]}`,"aria-hidden":"true",children:"★"},p));return e.jsx("div",{className:t["rating-stars"],children:o})},ae=a=>{const i=[];for(let o=1;o<=5;o++)i.push(e.jsx("button",{type:"button",className:`${t["star-button"]} ${o<=a?t["star-active"]:t["star-inactive"]}`,onClick:()=>r(p=>({...p,rating:o})),onTouchStart:B,"aria-label":`Valorar con ${o} estrella${o!==1?"s":""}`,children:"★"},o));return e.jsx("div",{className:t["interactive-stars"],children:i})};g.useEffect(()=>{if(!E)return;const a=()=>{const o=document.querySelector(`.${t["modal-content"]}`);if(!o)return;const{scrollTop:p,scrollHeight:l,clientHeight:_}=o,h=p>10,I=p+_<l-10;h?o.classList.add("scrolled"):o.classList.remove("scrolled"),I?o.classList.add("has-more-content"):o.classList.remove("has-more-content")},i=document.querySelector(`.${t["modal-content"]}`);return i&&(i.addEventListener("scroll",a),setTimeout(a,100)),()=>{i&&(i.removeEventListener("scroll",a),i.classList.remove("scrolled","has-more-content"))}},[E,t]);const B=a=>{const i=a.currentTarget;i.style.transform="scale(0.98)";const o=()=>{i.style.transform="",i.removeEventListener("touchend",o),i.removeEventListener("touchcancel",o)};i.addEventListener("touchend",o),i.addEventListener("touchcancel",o)};return e.jsxs("div",{ref:T,id:"testimonials",className:"section-cv","aria-label":"Testimonios",children:[e.jsx(me,{icon:"fas fa-comments",title:"Testimonios",subtitle:"Lo que dicen quienes han trabajado conmigo",className:t.testimonials}),"      ",E&&e.jsx(J,{children:e.jsx("div",{className:t["modal-overlay"],onClick:V,children:e.jsxs("div",{className:t["modal-content"],onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:t["modal-header"],children:[e.jsxs("h3",{className:t["modal-title"],children:[e.jsx("i",{className:"fas fa-quote-left"}),u?"Editar Testimonio":"Añadir Nuevo Testimonio"]}),"                ",e.jsx("button",{className:t["modal-close"],onClick:V,onTouchStart:B,"aria-label":"Cerrar modal",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("form",{className:t["modal-form"],onSubmit:U,children:[e.jsxs("div",{className:t["form-grid"],children:[e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"name",children:"Nombre *"}),e.jsx("input",{id:"name",name:"name",value:c.name,onChange:x,placeholder:"Tu nombre completo",required:!0})]}),e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"position",children:"Puesto *"}),e.jsx("input",{id:"position",name:"position",value:c.position,onChange:x,placeholder:"Tu puesto de trabajo",required:!0})]})]}),e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"text",children:"Testimonio *"}),e.jsx("textarea",{id:"text",name:"text",value:c.text,onChange:x,placeholder:"Comparte tu experiencia trabajando conmigo...",required:!0,rows:4})]}),e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"rating",children:"Valoración *"}),e.jsxs("div",{className:t["rating-input-container"],children:[ae(c.rating),e.jsxs("span",{className:t["rating-text"],children:[c.rating,"/5 estrellas"]})]}),e.jsx("small",{className:t["rating-help"],children:"Califica tu experiencia trabajando conmigo"})]}),"                ",!w&&e.jsxs("button",{type:"button",className:t["optional-toggle-btn"],onClick:()=>j(!0),onTouchStart:B,children:[e.jsx("i",{className:"fas fa-plus-circle"}),"Añadir información adicional (opcional)"]}),w&&e.jsxs("div",{className:t["optional-fields"],children:[e.jsxs("div",{className:t["form-grid"],children:[e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",value:c.email,onChange:x,placeholder:"email@ejemplo.com"}),e.jsx("small",{children:"Para mostrar tu avatar de Gravatar"})]}),e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"company",children:"Empresa"}),e.jsx("input",{id:"company",name:"company",value:c.company,onChange:x,placeholder:"Nombre de la empresa"})]})]}),e.jsxs("div",{className:t["form-group"],children:[e.jsx("label",{htmlFor:"website",children:"Sitio Web"}),e.jsx("input",{id:"website",name:"website",type:"url",value:c.website,onChange:x,placeholder:"https://tusitio.com"})]}),"                    ",e.jsxs("button",{type:"button",className:t["optional-hide-btn"],onClick:()=>j(!1),onTouchStart:B,children:[e.jsx("i",{className:"fas fa-minus-circle"}),"Ocultar campos opcionales"]})]}),"                ",e.jsxs("div",{className:t["modal-actions"],children:[e.jsx("button",{type:"button",className:t["btn-secondary"],onClick:V,onTouchStart:B,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:t["btn-primary"],onTouchStart:B,children:[e.jsx("i",{className:"fas fa-paper-plane"}),u?"Guardar Cambios":"Enviar Testimonio"]})]})]})]})})}),"      ",y&&e.jsxs("form",{className:`${t["testimonial-form"]} ${t["admin-form"]}`,onSubmit:U,children:[e.jsxs("div",{className:t["form-row"],children:[e.jsx("input",{name:"name",value:c.name,onChange:x,placeholder:"Nombre",required:!0}),e.jsx("input",{name:"position",value:c.position,onChange:x,placeholder:"Puesto",required:!0})]}),e.jsx("textarea",{name:"text",value:c.text,onChange:x,placeholder:"Testimonio",required:!0}),"          ",e.jsxs("div",{className:t["form-row"],children:[e.jsx("input",{name:"email",type:"email",value:c.email,onChange:x,placeholder:"Email (opcional)"}),e.jsx("input",{name:"company",value:c.company,onChange:x,placeholder:"Empresa (opcional)"})]}),e.jsxs("div",{className:t["form-row"],children:[e.jsx("input",{name:"website",type:"url",value:c.website,onChange:x,placeholder:"Sitio web (opcional)"}),e.jsxs("div",{className:t["rating-admin-group"],children:[e.jsx("label",{htmlFor:"admin-rating",children:"Rating:"}),e.jsxs("div",{className:t["rating-admin-container"],children:[[1,2,3,4,5].map(a=>e.jsx("button",{type:"button",className:`${t["star-button-admin"]} ${a<=c.rating?t["star-active"]:t["star-inactive"]}`,onClick:()=>r(i=>({...i,rating:a})),"aria-label":`Valorar con ${a} estrella${a!==1?"s":""}`,children:"★"},a)),e.jsxs("span",{className:t["rating-text-admin"],children:[c.rating,"/5"]})]})]})]}),e.jsxs("div",{className:t["form-actions"],children:[e.jsx("button",{type:"submit",className:`${t["action-button"]} ${t.primary}`,children:u?"Guardar":"Añadir Testimonio"}),u&&e.jsx("button",{type:"button",className:t["action-button"],onClick:()=>{r(R),d(null)},children:"Cancelar"})]})]}),e.jsxs("div",{className:"section-container",children:["        ",e.jsxs("div",{className:t["testimonials-grid"],children:["          ",b.map(({id:a,name:i,position:o,avatar:p,text:l,company:_,website:h,rating:I,created_at:k,email:O,avatar_url:W},D)=>{const v=s.has(a),ne=X(l,v);return e.jsxs("div",{className:`${t["testimonial-card"]}${$===a||$===-1&&D===b.length-1?` ${t["testimonial-animate"]}`:""}`,style:{animationDelay:`${D*100}ms`},tabIndex:0,"aria-label":`Testimonio de ${i}`,children:["                  ",e.jsx("div",{className:t["testimonial-header"],children:e.jsxs("div",{className:t["testimonial-avatar-wrapper"],children:["                      ",e.jsx("img",{src:K({name:i,email:O,avatar:W||p}),alt:`Avatar de ${i}`,className:t["testimonial-avatar"],onError:te,loading:"lazy"})]})}),e.jsxs("div",{className:t["testimonial-body"],children:[e.jsxs("div",{className:t["testimonial-text-container"],"aria-expanded":v,"aria-controls":`testimonial-text-${a}`,children:[e.jsx("p",{className:`${t["testimonial-text"]}${v?` ${t.expanded}`:""}`,id:`testimonial-text-${a}`,children:ne}),Q(l)&&e.jsx("button",{className:t["read-more-btn"],onClick:()=>Y(a),"aria-expanded":v,"aria-controls":`testimonial-text-${a}`,"aria-label":v?"Contraer testimonio":"Expandir testimonio completo",children:v?"Leer menos":"Leer más"})]}),"                    ",se(I),k&&e.jsxs("div",{className:t["testimonial-date"],children:[e.jsx("i",{className:"fas fa-calendar-alt","aria-hidden":"true"}),e.jsx("span",{children:Z(k)})]})]}),e.jsxs("div",{className:t["testimonial-footer"],children:[e.jsx("div",{className:t["testimonial-author"],children:e.jsxs("div",{className:t["author-info"],children:[e.jsx("span",{className:t["author-name"],children:i}),e.jsxs("span",{className:t["author-position"],children:[o,_&&` en ${_}`]}),h&&e.jsx("a",{href:h.startsWith("http")?h:`https://${h}`,target:"_blank",rel:"noopener noreferrer",className:t["author-website"],"aria-label":`Sitio web de ${i}`,title:"Visitar sitio web",children:e.jsx("i",{className:"fas fa-external-link-alt"})})]})}),y&&e.jsxs("div",{className:t["testimonial-actions"],children:[e.jsx("button",{className:t["edit-btn"],title:"Editar","aria-label":`Editar testimonio de ${i}`,onClick:()=>ee({id:a,name:i,position:o,text:l,company:_,website:h,rating:I}),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:t["delete-btn"],title:"Eliminar","aria-label":`Eliminar testimonio de ${i}`,onClick:()=>P(a),children:e.jsx("i",{className:"fas fa-trash"})})]})]})]},a)}),"          ",b.length%3!==0&&Array.from({length:3-b.length%3}).map((a,i)=>e.jsx("div",{className:t["testimonial-placeholder"],"aria-hidden":"true"},`placeholder-${i}`))]})]}),b.length===0&&e.jsxs("div",{className:t["empty-state"],children:[e.jsx("div",{className:t["empty-icon"],children:e.jsx("i",{className:"fas fa-comments"})}),e.jsx("h3",{className:t["empty-title"],children:"No hay testimonios disponibles"}),e.jsx("p",{className:t["empty-description"],children:y?"Añade el primer testimonio usando el formulario de arriba.":"¡Sé el primero en compartir tu experiencia!"})]}),z&&e.jsx(de,{actions:[...q?[{id:"admin-testimonials",onClick:()=>H(!0),icon:"fas fa-shield-alt",label:"Gestionar Testimonios",color:"primary"}]:[],{id:"add-testimonial",onClick:()=>C(!0),icon:"fas fa-plus",label:"Añadir Testimonio",color:"success"}],position:"bottom-right"}),"      ",G&&e.jsx(Je,{onClose:()=>H(!1),onTestimonialsChange:N})]})};export{ut as default};
