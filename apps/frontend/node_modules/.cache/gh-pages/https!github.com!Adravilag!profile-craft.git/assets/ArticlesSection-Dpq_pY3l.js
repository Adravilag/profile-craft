import{j as e,R as H,m as q,u as z,r as u,n as K,F as J}from"./index-wAcPHRB1.js";import{H as v}from"./HeaderSection-76FOVwKo.js";const Q="_paginationContainer_1cbm1_5",W="_paginationInfo_1cbm1_23",X="_pagination_1cbm1_5",Y="_pageNumbers_1cbm1_51",Z="_pageButton_1cbm1_63",ee="_active_1cbm1_137",te="_prevNext_1cbm1_151",se="_buttonText_1cbm1_163",ae="_ellipsis_1cbm1_171",l={paginationContainer:Q,paginationInfo:W,pagination:X,pageNumbers:Y,pageButton:Z,active:ee,prevNext:te,buttonText:se,ellipsis:ae},ne=({currentPage:c,totalPages:d,onPageChange:p,totalItems:_,itemsPerPage:m,showInfo:b=!0})=>{if(d<=1)return null;const y=(c-1)*m+1,h=Math.min(c*m,_),f=(()=>{const i=[];i.push(1);const x=Math.max(2,c-2),g=Math.min(d-1,c+2);x>2&&i.push("...");for(let n=x;n<=g;n++)i.push(n);return g<d-1&&i.push("..."),d>1&&i.push(d),i})();return e.jsxs("div",{className:l.paginationContainer,children:["      ",b&&e.jsx("div",{className:l.paginationInfo,children:e.jsx("span",{children:_===1?"1 proyecto":`Mostrando ${y}-${h} de ${_} proyectos`})}),e.jsxs("nav",{className:l.pagination,"aria-label":"Navegación de páginas",children:[e.jsxs("button",{className:`${l.pageButton} ${l.prevNext}`,onClick:()=>p(c-1),disabled:c===1,"aria-label":"Página anterior",children:[e.jsx("i",{className:"fas fa-chevron-left"}),e.jsx("span",{className:l.buttonText,children:"Anterior"})]}),e.jsx("div",{className:l.pageNumbers,children:f.map((r,i)=>e.jsx(H.Fragment,{children:typeof r=="number"?e.jsx("button",{className:`${l.pageButton} ${r===c?l.active:""}`,onClick:()=>p(r),"aria-label":`Página ${r}`,"aria-current":r===c?"page":void 0,children:r}):e.jsx("span",{className:l.ellipsis,"aria-hidden":"true",children:r})},i))}),e.jsxs("button",{className:`${l.pageButton} ${l.prevNext}`,onClick:()=>p(c+1),disabled:c===d,"aria-label":"Página siguiente",children:[e.jsx("span",{className:l.buttonText,children:"Siguiente"}),e.jsx("i",{className:"fas fa-chevron-right"})]})]})]})},ie="_articlesSection_pmufn_6",ce="_articlesGrid_pmufn_58",le="_articleCard_pmufn_84",re="_articleImage_pmufn_126",oe="_articleOverlay_pmufn_130",de="_readMore_pmufn_135",me="_techChip_pmufn_139",pe="_articleTypeContainer_pmufn_261",ue="_articleBadge_pmufn_269",_e="_articleTypeBadge_pmufn_284",he="_projectTypeBadge_pmufn_296",fe="_articleStatus_pmufn_308",ge="_articleMeta_pmufn_353",je="_articleDates_pmufn_362",xe="_articleDate_pmufn_362",Ne="_articleViews_pmufn_381",ve="_articleActions_pmufn_417",be="_articleContent_pmufn_485",ye="_articleTitle_pmufn_497",ke="_articleDescription_pmufn_518",Ce="_articleLinks_pmufn_538",Te="_articleLink_pmufn_538",Be="_github_pmufn_575",$e="_demo_pmufn_581",De="_video_pmufn_587",Se="_articleTechnologies_pmufn_751",Ae="_techMore_pmufn_828",Ee="_adminButton_pmufn_860",Le="_retryButton_pmufn_897",we="_articlesError_pmufn_932",Ie="_articlesEmpty_pmufn_953",Me="_articleCardSkeleton_pmufn_1126",Pe="_skeletonImage_pmufn_1148",Fe="_skeletonContent_pmufn_1170",Oe="_skeletonBadges_pmufn_1178",Ve="_skeletonBadge_pmufn_1178",Re="_skeletonTitle_pmufn_1209",Ge="_skeletonDescription_pmufn_1233",Ue="_skeletonLine_pmufn_1240",He="_skeletonTechs_pmufn_1271",qe="_skeletonTech_pmufn_1271",ze="_loading_pmufn_1009",Ke="_filtersContainer_pmufn_1442",Je="_filterButton_pmufn_1450",Qe="_active_pmufn_1474",t={articlesSection:ie,articlesGrid:ce,articleCard:le,articleImage:re,articleOverlay:oe,readMore:de,techChip:me,articleTypeContainer:pe,articleBadge:ue,articleTypeBadge:_e,projectTypeBadge:he,articleStatus:fe,articleMeta:ge,articleDates:je,articleDate:xe,articleViews:Ne,articleActions:ve,articleContent:be,articleTitle:ye,articleDescription:ke,articleLinks:Ce,articleLink:Te,github:Be,demo:$e,video:De,articleTechnologies:Se,techMore:Ae,adminButton:Ee,retryButton:Le,articlesError:we,articlesEmpty:Ie,articleCardSkeleton:Me,skeletonImage:Pe,skeletonContent:Fe,skeletonBadges:Oe,skeletonBadge:Ve,skeletonTitle:Re,skeletonDescription:Ge,skeletonLine:Ue,skeletonTechs:He,skeletonTech:qe,loading:ze,filtersContainer:Ke,filterButton:Je,active:Qe},Ze=({onArticleClick:c,showAdminButton:d=!1,onAdminClick:p})=>{const _=q(),{articles:m,articlesLoading:b,articlesError:y}=z(),[h,C]=u.useState([]),[f,r]=u.useState(1),[i]=u.useState(3),[x,g]=u.useState(!1),[n,P]=u.useState("all"),o=m.length>0?m:h,T=m.length>0?b:h.length===0,B=m.length>0?y:null,$=(()=>{let s=o;return n==="projects"?s=o.filter(a=>!a.article_content):n==="articles"&&(s=o.filter(a=>a.article_content)),s})(),N=$.length,D=Math.ceil(N/i),S=(f-1)*i,F=S+i,O=$.slice(S,F),V=s=>{s!==f&&(g(!0),setTimeout(()=>{r(s),g(!1);const a=document.querySelector("#articles .header-section-title");a&&a.scrollIntoView({behavior:"smooth",block:"start"})},100))},k=s=>{P(s),r(1)};u.useEffect(()=>{m.length===0&&h.length===0&&A()},[m.length,h.length]),u.useEffect(()=>{if(o.length>0){const s=o.some(j=>!j.article_content),a=o.some(j=>j.article_content);console.log("Contenido disponible:",{hasProjects:s,hasArticles:a,currentFilter:n})}},[o.length,n]);const A=async()=>{try{const s=await K();console.log("Artículos cargados:",(s==null?void 0:s.length)||0),C(s)}catch(s){console.error("Error al cargar los proyectos:",s)}},E=s=>{c?c(s):_(`/article/${s}`)},L=()=>{_("/articles/admin"),p==null||p()},R=o.some(s=>!s.article_content),G=o.some(s=>s.article_content),U=R&&G,w=()=>{switch(n){case"projects":return"Proyectos Destacados";case"articles":return"Artículos Destacados";default:return"Proyectos y Artículos"}},I=()=>{switch(n){case"projects":return"fas fa-code";case"articles":return"fas fa-newspaper";default:return"fas fa-th"}},M=()=>{if(N>i){const s=n==="all"?"elementos":n==="projects"?"proyectos":"artículos";return`Los ${s} más relevantes (${N} ${s} ${n==="all"?"en total":"encontrados"})`}switch(n){case"projects":return"Una selección de mis proyectos más relevantes y sus tecnologías";case"articles":return"Una selección de mis artículos más interesantes y útiles";default:return"Una selección de mis proyectos y artículos más relevantes"}};return T?e.jsxs("div",{className:t.articlesSection,children:[e.jsx(v,{icon:I(),title:w(),subtitle:M(),className:"articles"}),e.jsx("div",{className:"section-container",children:e.jsx("div",{className:t.articlesGrid,children:[...Array(6)].map((s,a)=>e.jsxs("div",{className:t.articleCardSkeleton,children:[e.jsx("div",{className:t.skeletonImage}),e.jsxs("div",{className:t.skeletonContent,children:[e.jsxs("div",{className:t.skeletonBadges,children:[e.jsx("div",{className:t.skeletonBadge}),e.jsx("div",{className:t.skeletonBadge})]}),e.jsx("div",{className:t.skeletonTitle}),e.jsxs("div",{className:t.skeletonDescription,children:[e.jsx("div",{className:t.skeletonLine}),e.jsx("div",{className:t.skeletonLine})]}),e.jsxs("div",{className:t.skeletonTechs,children:[e.jsx("div",{className:t.skeletonTech}),e.jsx("div",{className:t.skeletonTech}),e.jsx("div",{className:t.skeletonTech})]})]})]},a))})})]}):B?e.jsxs("div",{className:t.articlesSection,children:[e.jsx(v,{icon:"fas fa-project-diagram",title:"Proyectos Destacados",subtitle:"Una selección de mis proyectos más relevantes y sus tecnologías",className:"articles"}),e.jsxs("div",{className:t.articlesError,children:[e.jsx("p",{children:B}),e.jsx("button",{onClick:A,className:t.retryButton,children:"Reintentar"})]})]}):o.length===0&&!T?e.jsxs("div",{className:t.articlesSection,children:[e.jsx(v,{icon:"fas fa-project-diagram",title:"Proyectos Destacados",subtitle:"Una selección de mis proyectos más relevantes y sus tecnologías",className:"articles"}),e.jsxs("div",{className:t.articlesEmpty,children:[e.jsx("i",{className:"fas fa-project-diagram"}),e.jsx("p",{children:"No hay proyectos publicados aún."}),d&&e.jsxs("button",{onClick:L,className:t.adminButton,children:[e.jsx("i",{className:"fas fa-plus"})," Crear primer proyecto"]})]}),"      "]}):e.jsxs("div",{className:"section-cv",id:"articles",children:[e.jsx(v,{icon:I(),title:w(),subtitle:M(),className:"articles"}),e.jsxs("div",{className:"section-container",children:[U&&e.jsxs("div",{className:t.filtersContainer,children:[e.jsxs("button",{className:`${t.filterButton} ${n==="all"?t.active:""}`,onClick:()=>k("all"),"aria-pressed":n==="all",children:[e.jsx("i",{className:"fas fa-th"})," Todos"]}),e.jsxs("button",{className:`${t.filterButton} ${n==="projects"?t.active:""}`,onClick:()=>k("projects"),"aria-pressed":n==="projects",children:[e.jsx("i",{className:"fas fa-code"})," Proyectos"]}),e.jsxs("button",{className:`${t.filterButton} ${n==="articles"?t.active:""}`,onClick:()=>k("articles"),"aria-pressed":n==="articles",children:[e.jsx("i",{className:"fas fa-newspaper"})," Artículos"]})]}),e.jsx("div",{className:`${t.articlesGrid} ${x?t.loading:""}`,children:O.map(s=>e.jsxs("article",{className:t.articleCard,onClick:()=>E(s.id),tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),E(s.id))},children:[s.image_url&&e.jsxs("div",{className:t.articleImage,children:[e.jsx("img",{src:s.image_url,alt:s.title,loading:"lazy"}),e.jsx("div",{className:t.articleOverlay,"data-tooltip":"Ver proyecto completo",role:"button",tabIndex:-1,"aria-label":"Abrir proyecto",children:e.jsx("i",{className:"fas fa-newspaper","aria-hidden":"true"})})]}),e.jsxs("div",{className:t.articleContent,children:[e.jsxs("div",{className:t.articleTypeContainer,children:[s.article_content?e.jsxs("span",{className:`${t.articleBadge} ${t.articleTypeBadge}`,role:"badge","aria-label":"Tipo de contenido: Artículo",children:[e.jsx("i",{className:"fas fa-newspaper","aria-hidden":"true"}),"Artículo"]}):e.jsxs("span",{className:`${t.articleBadge} ${t.projectTypeBadge}`,role:"badge","aria-label":"Tipo de contenido: Proyecto",children:[e.jsx("i",{className:"fas fa-code","aria-hidden":"true"}),"Proyecto"]}),e.jsx("span",{className:`${t.articleBadge} ${t.articleStatus}`,"data-status":s.status,role:"badge","aria-label":`Estado del proyecto: ${s.status}`,children:s.status==="Completado"?"COMPLETADO":s.status==="En Desarrollo"?"EN DESARROLLO":"BORRADOR"})]}),e.jsxs("div",{className:t.articleMeta,children:[e.jsx("div",{className:t.articleDates,children:s.created_at?e.jsx("time",{className:t.articleDate,dateTime:s.created_at,title:`Publicado el ${new Date(s.created_at).toLocaleDateString("es-ES")}`,children:new Date(s.created_at).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})}):e.jsx("span",{className:t.articleDate,children:"Fecha no disponible"})}),e.jsxs("span",{className:t.articleViews,"aria-label":`Número de visitas: ${s.views||0}`,children:[e.jsx("i",{className:"fas fa-eye","aria-hidden":"true"}),s.views||0]})]}),e.jsx("h3",{className:t.articleTitle,children:s.title}),e.jsx("p",{className:t.articleDescription,children:s.description}),s.technologies&&s.technologies.length>0&&e.jsxs("div",{className:t.articleTechnologies,children:[s.technologies.slice(0,4).map((a,j)=>e.jsx("span",{className:t.techChip,children:a},j)),s.technologies.length>4&&e.jsxs("span",{className:t.techMore,children:["+",s.technologies.length-4]})]}),e.jsxs("div",{className:t.articleLinks,children:[s.github_url&&e.jsx("a",{href:s.github_url,className:`${t.articleLink} ${t.github}`,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),"aria-label":"Ver repositorio en GitHub",children:e.jsx("i",{className:"fab fa-github"})}),s.live_url&&s.live_url!=="#"&&e.jsx("a",{href:s.live_url,className:`${t.articleLink} ${t.demo}`,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),"aria-label":"Ver demo en vivo",children:e.jsx("i",{className:"fas fa-eye"})}),s.video_demo_url&&e.jsx("a",{href:s.video_demo_url,className:`${t.articleLink} ${t.video}`,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),"aria-label":"Ver video demostración",children:e.jsx("i",{className:"fab fa-youtube"})})]}),e.jsx("div",{className:t.articleActions,children:e.jsxs("span",{className:t.readMore,children:["Ver proyecto completo ",e.jsx("i",{className:"fas fa-arrow-right"})]})})]})]},s.id))}),D>1&&e.jsx(ne,{currentPage:f,totalPages:D,onPageChange:V,totalItems:N,itemsPerPage:i,showInfo:!0})]}),d&&e.jsx(J,{onClick:L,icon:"fas fa-edit",label:"Gestionar Proyectos",color:"primary",position:"bottom-right"})]})};export{Ze as default};
